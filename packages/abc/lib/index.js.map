{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external {\"root\":\"Vue\",\"commonjs\":\"vue\",\"commonjs2\":\"vue\"}","webpack:///external \"@blazes/utils\"","webpack:///external \"@blazes/theme\"","webpack:///external \"ant-design-vue/lib/form\"","webpack:///external \"ant-design-vue/lib/input\"","webpack:///external \"@ant-design/icons-vue/DownOutlined\"","webpack:///external \"vue-router\"","webpack:///external \"ant-design-vue/lib/row\"","webpack:///external \"ant-design-vue/lib/col\"","webpack:///external \"ant-design-vue/lib/button\"","webpack:///external \"@ant-design/icons-vue/LoadingOutlined\"","webpack:///external \"@ant-design/icons-vue/EditOutlined\"","webpack:///external \"@ant-design/icons-vue/DeleteOutlined\"","webpack:///external \"@ant-design/icons-vue/FilterOutlined\"","webpack:///external \"ant-design-vue/lib/message\"","webpack:///external \"@ant-design/icons-vue/SearchOutlined\"","webpack:///external \"@ant-design/icons-vue/CloseOutlined\"","webpack:///./src/ellipsis/src/index.vue?1123","webpack:///./src/st/src/index.vue?c206","webpack:///./src/st/src/index.vue?f87e","webpack:///./src/page-header/src/index.vue?7b04","webpack:///./src/sv/src/index.vue?b30a","webpack:///./src/sf/src/index.vue?3d0a","webpack:///./src/table-wrapper/src/index.vue?65bc","webpack:///./src/ellipsis/src/index.vue","webpack:///./src/ellipsis/src/index.vue?92ed","webpack:///./src/ellipsis/src/index.vue?bfca","webpack:///./src/ellipsis/index.ts","webpack:///./src/st/src/index.vue","webpack:///./src/st/src/type.ts","webpack:///./src/st/src/column-source.ts","webpack:///./src/st/src/data-source.ts","webpack:///./src/st/src/index.vue?967c","webpack:///./src/st/src/index.vue?7ff4","webpack:///./src/st/index.ts","webpack:///./src/page-header/src/index.vue","webpack:///./src/page-header/src/index.vue?6be2","webpack:///./src/page-header/src/index.vue?141a","webpack:///./src/page-header/index.ts","webpack:///./src/operates/src/index.vue?179d","webpack:///./src/operates/src/index.vue?7e0f","webpack:///./src/operates/src/index.vue","webpack:///./src/operates/index.ts","webpack:///./src/search-input/src/index.vue?4d44","webpack:///./src/search-input/src/index.vue?1d1c","webpack:///./src/search-input/src/index.vue","webpack:///./src/search-input/index.ts","webpack:///./src/sv/src/index.vue","webpack:///./src/sv/src/type.ts","webpack:///./src/sv/src/index.vue?cb67","webpack:///./src/sv/src/index.vue?31fe","webpack:///./src/sv/index.ts","webpack:///./src/sf/src/index.vue","webpack:///./src/sf/src/type.ts","webpack:///./src/sf/src/widgets/sf-input.vue?92d4","webpack:///./src/sf/src/widgets/sf-input.vue?6c1d","webpack:///./src/sf/src/widgets/sf-input.vue","webpack:///./src/sf/src/model/base.ts","webpack:///./src/sf/src/model/string.ts","webpack:///./src/sf/src/index.vue?6561","webpack:///./src/sf/src/model/any.ts","webpack:///./src/sf/src/model/number.ts","webpack:///./src/sf/src/model/boolean.ts","webpack:///./src/sf/src/index.vue?e84b","webpack:///./src/sf/src/util.ts","webpack:///./src/sf/index.ts","webpack:///./src/table-wrapper/src/index.vue","webpack:///./src/table-wrapper/src/index.vue?e5b6","webpack:///./src/table-wrapper/src/index.vue?3067","webpack:///./src/table-wrapper/index.ts","webpack:///./src/tags/src/index.vue?9634","webpack:///./src/tags/src/index.vue?eeb0","webpack:///./src/tags/src/index.vue","webpack:///./src/tags/index.ts"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__17__","__WEBPACK_EXTERNAL_MODULE__18__","__WEBPACK_EXTERNAL_MODULE__19__","__WEBPACK_EXTERNAL_MODULE__20__","__WEBPACK_EXTERNAL_MODULE__21__","__WEBPACK_EXTERNAL_MODULE__22__","__WEBPACK_EXTERNAL_MODULE__23__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ref","class","text","placement","width","content","relTooltip","trigger","overlayClassName","popperClass","props","String","toolTip","type","default","wrapperRef","setTimeout","el","lineHeight","height","getComputedStyle","Math","abs","render","__scopeId","install","app","component","changeTable","data-source","data$","loading","pagination","rowKey","scroll","bordered","columns$","column","index","customRender","fixed","sorter","compare","ellipsis","title","renderTitle","row","scope","filter","setDropdownRef","visible","_visible","overlay","_menus","length","menu","checked","handleCheckPart","divided","indeterminate","checkAll","handleCheckAll","$event","size","filterConfirm","confirmText","_default","record","_values","color","click","validBtns","buttons","btn","children","subBtn","btnClick","btnText","icon","popconfirm","confirm","$slots","expandedRowRender","DEFAULT_ST_RES","reName","total","list","DEFAULT_ST_REQ","pi","ps","DEFAULT_ST_PAGE","front","position","show","showSize","pageSizes","showQuickJumper","indexReset","toTop","toTopOffset","DEFAULT_FILTER","lastColumns","this","arrIsEmpty","Error","columns","copyColumens","item","iif","Array","isArray","split","indexKey","join","fixButtons","filterCoerce","push","fixedCoerce","res","menus","Promise","resolve","then","resp","clearText","countReduce","b","toString","replace","w","forEach","idx","_left","slice","reduce","reverse","_right","ret","btnCoerceIf","iifBehavior","col","findIndex","checkedCount","options","reject","data","paginator","page","retTotal","retPs","retPi","rawData","remote","showPage","getByHttp","result","catch","err","values","getFilteredData","onFilter","fn","some","v","console","warn","maxPageIndex","ceil","max","process","resultOffset","len","realIndex","map","pageShow","format","formatRes","org","tag","dataItem","url","req","first","params","getReqFilterMap","getReqSortMap","firstParams","headers","f","obj","pageVo","Number","Boolean","components","LoadingOutlined","DownOutlined","EditOutlined","DeleteOutlined","FilterOutlined","columnSource","dataSource","_req","_res","_page","pi$","ps$","total$","isPagination","dropdownRefs","router","loadPageData","msg","error","load","extraParams","merge","reload","refreshColumns","btns","isRenderDisabled","_result","_disabled","event","checkAllFilter","target","updateIndeterminate","updateDefault","handleFilter","resetColumns","emitReload","preClearData","_","sort","current","order","undefined","showTotal","reloadCurrent","breadcrumb","separator","paths","path","link","to","logo","title$","action","extra","route","curMatch","getLast","matched","getPathByUrl","operates","firstButtonPrimary","validOperates","operate","_children","_text","operates$","operateClick","dropdown","SearchOutlined","CloseOutlined","modelValue","placeholder","context","model","search","emit","clear","suffix","gutter","sv","option","label","classes","renderValue","defaultVal","Sv","labelWidth","ioption","isv","newSv","genClass","immediate","form","layout","schema","ui","items","prop","span","rules","style","controlWidth","wrapperCol","labelCol","widget","addItem","button$","className","justify","hideReset","reset","resetText","hideSubmit","submit","submitText","formSymbol","formRefSymbol","DEFAULT_GUTTER","offset","spanLabel","spanControl","Password","setup","model$","showPassword","disabled","readOnly","BaseModel","fallbackValue","typeModels","string","regexp","any","number","boolean","button","formData","emits","formSubmit","formReset","Item","directives","btnLoading","formRef","itemProperties","parentGutter","properties","keys","required","find","fullField","transform","getValue","addReuiqredRule","validate","validator","hidden","visibleIf","watchKeys","flag","visibleIfFns","includes","keySet","Set","add","from","searchProperty","getEnum","indexOf","getData","asyncData","getCopyEnum","enums","transMapToEnum","tagMap","TagColor"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,OAAQA,QAAQ,iBAAkBA,QAAQ,iBAAkBA,QAAQ,2BAA4BA,QAAQ,4BAA6BA,QAAQ,sCAAuCA,QAAQ,cAAeA,QAAQ,0BAA2BA,QAAQ,0BAA2BA,QAAQ,6BAA8BA,QAAQ,yCAA0CA,QAAQ,sCAAuCA,QAAQ,wCAAyCA,QAAQ,wCAAyCA,QAAQ,8BAA+BA,QAAQ,wCAAyCA,QAAQ,6CACvnB,GAAqB,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,CAAE,gBAAiB,gBAAiB,0BAA2B,2BAA4B,qCAAsC,aAAc,yBAA0B,yBAA0B,4BAA6B,wCAAyC,qCAAsC,uCAAwC,uCAAwC,6BAA8B,uCAAwC,uCAAwCJ,OACjf,CACJ,IAAIM,EAAuB,iBAAZL,QAAuBD,EAAQG,QAAQ,OAAQA,QAAQ,iBAAkBA,QAAQ,iBAAkBA,QAAQ,2BAA4BA,QAAQ,4BAA6BA,QAAQ,sCAAuCA,QAAQ,cAAeA,QAAQ,0BAA2BA,QAAQ,0BAA2BA,QAAQ,6BAA8BA,QAAQ,yCAA0CA,QAAQ,sCAAuCA,QAAQ,wCAAyCA,QAAQ,wCAAyCA,QAAQ,8BAA+BA,QAAQ,wCAAyCA,QAAQ,wCAA0CH,EAAQD,EAAU,IAAGA,EAAK,iBAAkBA,EAAK,iBAAkBA,EAAK,2BAA4BA,EAAK,4BAA6BA,EAAK,sCAAuCA,EAAK,cAAeA,EAAK,0BAA2BA,EAAK,0BAA2BA,EAAK,6BAA8BA,EAAK,yCAA0CA,EAAK,sCAAuCA,EAAK,wCAAyCA,EAAK,wCAAyCA,EAAK,8BAA+BA,EAAK,wCAAyCA,EAAK,wCACjvC,IAAI,IAAIQ,KAAKD,GAAuB,iBAAZL,QAAuBA,QAAUF,GAAMQ,GAAKD,EAAEC,IAPxE,CASGC,QAAQ,SAASC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAgCC,EAAiCC,EAAiCC,EAAiCC,EAAiCC,EAAiCC,EAAiCC,GAC1hB,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAU3B,QAGnC,IAAIC,EAASwB,EAAiBE,GAAY,CACzCrB,EAAGqB,EACHC,GAAG,EACH5B,QAAS,IAUV,OANA6B,EAAQF,GAAUG,KAAK7B,EAAOD,QAASC,EAAQA,EAAOD,QAAS0B,GAG/DzB,EAAO2B,GAAI,EAGJ3B,EAAOD,QA0Df,OArDA0B,EAAoBK,EAAIF,EAGxBH,EAAoBM,EAAIP,EAGxBC,EAAoBO,EAAI,SAASjC,EAASkC,EAAMC,GAC3CT,EAAoBU,EAAEpC,EAASkC,IAClCG,OAAOC,eAAetC,EAASkC,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhET,EAAoBe,EAAI,SAASzC,GACX,oBAAX0C,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAetC,EAAS0C,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAetC,EAAS,aAAc,CAAE4C,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBO,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAASnD,GAChC,IAAIkC,EAASlC,GAAUA,EAAO8C,WAC7B,WAAwB,OAAO9C,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAyB,EAAoBO,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRT,EAAoBU,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG5B,EAAoB+B,EAAI,IAIjB/B,EAAoBA,EAAoBgC,EAAI,I,gBClFrDzD,EAAOD,QAAUQ,G,cCAjBP,EAAOD,QAAUS,G,cCAjBR,EAAOD,QAAUU,G,cCAjBT,EAAOD,QAAUW,G,cCAjBV,EAAOD,QAAUY,G,cCAjBX,EAAOD,QAAUa,G,cCAjBZ,EAAOD,QAAUc,G,cCAjBb,EAAOD,QAAUe,G,cCAjBd,EAAOD,QAAUgB,G,cCAjBf,EAAOD,QAAUiB,G,4ICAjBhB,EAAOD,QAAUkB,G,cCAjBjB,EAAOD,QAAUmB,G,cCAjBlB,EAAOD,QAAUoB,G,cCAjBnB,EAAOD,QAAUqB,G,cCAjBpB,EAAOD,QAAUsB,G,cCAjBrB,EAAOD,QAAUuB,G,cCAjBtB,EAAOD,QAAUwB,G,6BCAjB,O,6BCAA,O,6BCAA,O,6BCAA,O,6BCAA,O,6BCAA,O,6BCAA,O,irBCCOmC,IAAI,c,aAYAC,MAAM,Y,8HAZf,sBAiBM,MAjBN,EAiBM,CAhBW,WAAJ,EAAAd,M,sBAAX,sBAEM,kCADD,EAAAe,MAAI,K,sBAET,sBAYY,G,MAVVC,UAAU,MACTC,MAAO,IACPC,QAAS,EAAAC,WACVC,QAAQ,QACPC,iBAAkB,EAAAC,a,WAEnB,IAAsC,CAAtC,sBAAsC,MAAtC,EAAsC,0BAAb,EAAAP,MAAI,GAC7B,qBAEO,sBAFP,IAEO,CADL,sBAA2B,qCAAnB,EAAAI,YAAU,I,oECXX,4BAAgB,CAC7B/B,KAAM,WACNmC,MAAO,CACLR,KAAMS,OACNC,QAASD,OACTF,YAAa,CACXI,KAAMF,OACNG,QAAS,KAGb,MAAMJ,GACJ,MAAMJ,EAAaI,EAAME,SAAWF,EAAMR,KACpCf,EAAO,cAAI,UACX4B,EAAyC,cAAI,MAWnD,OAVA,oBAAU,KACRC,WAAW,KACT,MAAMC,EAAKF,EAAW9B,OAChB,WAAEiC,EAAF,OAAcC,GAAWC,iBAAiBH,GAC5CI,KAAKC,IAAI,gBAAMJ,GAAc,gBAAMC,IAAW,IAChDhC,EAAKF,MAAQ,aAEd,OAGE,CAAEE,OAAMmB,aAAYS,iB,MCvB/B,EAAOQ,OAASA,EAChB,EAAOC,UAAY,kBAEJ,QCHf,EAASC,QAAWC,IAClBA,EAAIC,UAAU,EAASpD,KAAM,IAIhB,MADoC,E,mGCR5C0B,MAAM,M,GA6BEA,MAAM,U,GA4BMA,MAAM,kB,GASNA,MAAM,8B,4BAKN,M,GAaAA,MAAM,kB,4BAAiB,Q,GA0C5BA,MAAM,W,4lBA9H1B,sBA2KM,MA3KN,EA2KM,CA1KJ,sBAyKU,GAxKP,SAAQ,EAAA2B,YACRC,cAAa,EAAAC,MACbC,QAAS,EAAAA,QACTC,aAAsB,gB,SAAoD,M,SAA8B,M,MAA2B,S,aAAqC,aAUxKC,OAAQ,EAAAA,OACRC,OAAQ,EAAAA,OACRC,SAAU,EAAAA,U,iCAKT,IAAmC,E,wBAHrC,sBAmJiB,qCAhJW,EAAAC,SAAQ,CAA1BC,EAAQC,KAAK,M,6BAHvB,sBAmJiB,GAlJdlC,MAAOiC,EAAOjC,MACdb,IAAK8C,EAAO9C,IAEZgD,aAAcF,EAAOE,aACrBC,MAAOH,EAAOG,QAAK,EACnBC,OAAM,UAAEJ,EAAOI,cAAT,aAAE,EAAeC,QACvBC,SAAUN,EAAOM,U,CAEPC,MAAK,EAAO,IACrB,sBA+DM,MA/DN,EA+DM,CA5DIP,EAAOQ,YAFf,qBAKQ,SAJCR,EAAOQ,YAAW,C,MAExBC,IAAKC,EAAMD,IACXF,MAAOP,EAAOO,Y,6BAEjB,sBAAgD,oB,oDAA3BP,EAAOO,OAAK,I,OAEzBP,EAAOW,Q,sBADf,sBAsDa,G,MApDX/C,MAAM,SACLD,IAAK,EAAAiD,eAAeX,GACrB9B,iBAAiB,qBACT0C,QAASb,EAAOW,OAAOG,SAASlE,M,sBAAvBoD,EAAOW,OAAOG,SAASlE,MAAK,EAC5CsB,QAAS,CAAC,U,CAOA6C,QAAO,EAChB,IAsCS,CAtCT,sBAsCS,Q,UArCP,IA6BW,CA7BKf,EAAOW,OAAOK,OAAOpE,MAAMqE,Q,sBAA3C,sBA6BW,qB,wBA5BT,sBAWc,qCAVGjB,EAAOW,OAAOK,OAAOpE,MAA7BsE,I,sBADT,sBAWc,GATXhE,IAAKgE,EAAKtE,O,WAEX,IAMM,CANN,sBAMM,MANN,EAMM,CALJ,sBAIC,GAHSuE,QAASD,EAAKC,Q,sBAALD,EAAKC,QAAO,EAC5B,SAAM,GAAE,EAAAC,gBAAgBpB,EAAQC,I,WAChC,IAAe,C,oDAAZiB,EAAKrD,MAAI,K,4EAInB,sBAec,GAfDD,MAAM,SAASyD,QAAA,I,WAC1B,IAaM,CAbN,sBAaM,MAbN,EAaM,CAZJ,sBAKC,GAJEC,cAAetB,EAAOW,OAAOW,cAAc1E,MACpCuE,QAASnB,EAAOW,OAAOY,SAAS3E,M,sBAAvBoD,EAAOW,OAAOY,SAAS3E,MAAK,EAC5C,SAAM,GAAE,EAAA4E,eAAeC,EAAQzB,EAAQC,I,WACvC,IAAE,C,yEAEL,sBAKC,GAJCyB,KAAK,QACLlD,KAAK,UACJ,QAAK,GAAE,EAAAmD,cAAc3B,EAAQC,I,WAC7B,IAA+B,C,oDAA5BD,EAAOW,OAAOiB,aAAW,K,mEAMnC,sBAIc,W,UAHZ,IAEM,CAFN,sBAEM,MAFN,EAEM,C,EADD,sBAAmB,O,gCAxChC,IAIE,CAJF,sBAIE,GAHAhE,MAAK,CAAC,QAAO,QACKoC,EAAOW,OAAOkB,SAASjF,QACxC,QAAK,2BAAOoD,EAAOW,OAAOG,SAASlE,OAAK,a,qHA8CtC6B,QAAO,EAChB,EADoBqD,YAAM,CAGlB9B,EAAOd,OAFf,qBAKQ,SAJCc,EAAOd,OAAM,C,MAEnBuB,IAAKqB,EACLlF,MAAOkF,EAAOC,QAAQ9B,S,6BAEzB,sBA+DW,oBA9DO6B,EAAOC,QAAQ9B,GAAOpC,M,sBAAtC,sBAiBW,oBAfU,QAAXmC,EAAOxB,M,sBADf,sBAIC,G,MAFEwD,MAAOF,EAAOC,QAAQ9B,GAAO+B,O,WAC7B,IAAgC,C,oDAA7BF,EAAOC,QAAQ9B,GAAOpC,MAAI,K,sBAIR,SAAXmC,EAAOxB,M,sBAFpB,sBAKI,K,MAJD,QAAK,2BAAe,EAAAyD,MAAMH,EAAQ9B,GAAM,qB,0BAGtC8B,EAAOC,QAAQ9B,GAAOpC,MAAI,iB,sBAE/B,sBAIC,Q,MAFE0C,MAAOP,EAAOM,SAAWwB,EAAOC,QAAQ9B,GAAOpC,KAAI,I,0BAChDiE,EAAOC,QAAQ9B,GAAOpC,MAAI,e,wEAGlC,sBA2CO,qCA1CS,EAAAqE,UAAUlC,EAAOmC,QAASL,EAAQ9B,GAAzCoC,I,sBADT,sBA2CO,QAzCJlF,IAAKkF,EAAIvE,KACVD,MAAM,a,CAEYwE,EAAIC,SAASpB,OAAM,G,sBAArC,sBAmBa,WAZAF,QAAO,EAChB,IASS,CATT,sBASS,Q,UAPL,IAAyD,E,wBAD3D,sBAOc,qCANK,EAAAmB,UAAUE,EAAIC,SAAUP,EAAQ9B,GAA1CsC,I,sBADT,sBAOc,GALXpF,IAAKoF,EAAOzE,KACZ,QAAK,GAAE,EAAA0E,SAAST,EAAQQ,I,WAEzB,IAAsD,CAAtD,sBAAsD,QAAhD,UAAQ,EAAAE,QAAQV,EAAOC,QAASO,I,6CACtC,sBAA+B,kCAAfA,EAAOG,U,wDAd7B,IAKO,CALP,sBAKO,OALP,EAKO,CAJL,sBAGI,UAFF,sBAAmD,QAA7C,UAAQ,EAAAD,QAAQV,EAAOC,QAASK,I,sBACtC,sBAAgB,S,mCAgBtB,sBAiBW,oBAfO,eAARA,EAAI5D,M,sBADZ,sBASe,G,MAPZ+B,MAAO6B,EAAIM,WAAWnC,MACtB,UAAO,GAAE6B,EAAIM,WAAWC,QAAQb,I,WAEjC,IAGI,CAHJ,sBAGI,UAFF,sBAAmD,QAA7C,UAAQ,EAAAU,QAAQV,EAAOC,QAASK,I,6CACtC,sBAA4B,kCAAZA,EAAIK,Y,yDAItB,sBAGI,K,MAHA,QAAK,GAAE,EAAAF,SAAST,EAAQM,I,CAC1B,sBAAmD,QAA7C,UAAQ,EAAAI,QAAQV,EAAOC,QAASK,I,6CACtC,sBAA4B,kCAAZA,EAAIK,S,0HAQc,EAAAG,OAAOC,kB,MAA5C,oB,KACT,EAD8Bf,YAAM,CACpC,qBAAuD,8BAAhDA,OAAQA,QAAM,c,6FCEhBgB,EAAyB,CACpCC,OAAQ,CAAEC,MAAO,QAASC,KAAM,UAErBC,EAAyB,CACpCH,OAAQ,CAAEI,GAAI,SAAUC,GAAI,UAEjBC,EAA2B,CACtCC,OAAO,EACPC,SAAU,SACVC,MAAM,EACNC,UAAU,EACVC,UAAW,CAAC,GAAI,GAAI,GAAI,GAAI,IAC5BC,iBAAiB,EACjBC,YAAY,EACZC,OAAO,EACPC,YAAa,KAGFC,EACQ,KADRA,EAEM,KCpLL,MAAO,EAArB,cACE,KAAAC,YAA2B,GAE3B,QAAQf,GAEN,GADAgB,KAAKD,YAAcf,EACf,eAAaiB,WAAWjB,GAC1B,MAAM,IAAIkB,MAAM,8CAElB,MAAMC,EAAuB,GACvBC,EAAe,mBAASpB,GAC9B,IAAK,MAAMqB,KAAQD,EACbC,EAAKC,KAAOD,EAAKC,IAAID,KAGrBA,EAAKrE,QACFuE,MAAMC,QAAQH,EAAKrE,SACtBqE,EAAKrE,MAAQqE,EAAKrE,MAAMyE,MAAM,MAEhCJ,EAAKK,SAAWL,EAAKrE,MAAM2E,KAAK,MAElCN,EAAKnC,QAAU8B,KAAKY,WAAWP,EAAKnC,SACpCmC,EAAKvG,MAAQuG,EAAKvG,OAAS,OAC3BuG,EAAK7F,QAAU6F,EAAK7F,SAAW,GAC/B6F,EAAK3D,OAASsD,KAAKa,aAAaR,GAChCA,EAAKpH,IACHoH,EAAKpH,KACFoH,EAAKrE,MAAU,GAAGqE,EAAKpF,OAAWoF,EAAK/D,MAAQ+D,EAAK9D,YACzD4D,EAAQW,KAAKT,IAKf,OAFAL,KAAKe,YAAYZ,GAEVA,EAGD,aAAaE,GACnB,GAAmB,MAAfA,EAAK3D,OACP,OAAO,KAET,MAAMsE,EAAuBX,EAAK3D,OAClC,IAAKsE,YAAKC,QAAS,eAAahB,WAAWe,aAAxB,EAAwBA,EAAKC,OAC9C,OAAO,KAGTD,EAAIjE,OAAS,mBAAS,CAAEpE,MAAO,KAe/B,OAde4H,MAAMC,QAAQQ,EAAIC,OAC7B,IAAMC,QAAQC,QAAQH,EAAIC,OAC1BD,EAAIC,SACAG,KAAMC,IACZL,EAAIjE,OAAQpE,MAAQ0I,IAEtBL,EAAIrD,YAAcqD,EAAIrD,aAAemC,EACrCkB,EAAIM,UAAYN,EAAIM,WAAaxB,EACjCkB,EAAI/H,IAAM+H,EAAI/H,KAAOoH,EAAKK,SAC1BM,EAAIpD,SAAW,mBAAS,CAAEjF,OAAO,IACjCqI,EAAI3D,cAAgB,mBAAS,CAAE1E,OAAO,IACtCqI,EAAI1D,SAAW,mBAAS,CAAE3E,OAAO,IACjCqI,EAAInE,SAAW,mBAAS,CAAElE,OAAO,IAE1BqI,EAGD,YAAYhC,GAClB,MAAMuC,EAAc,CAACnL,EAAWoL,IAC9BpL,IAAKoL,EAAE1H,MAAO2H,WAAWC,QAAQ,KAAM,IAEzC1C,EACGtC,OAAOiF,GAAKA,EAAEzF,OAAqB,SAAZyF,EAAEzF,OAAoByF,EAAE7H,OAC/C8H,QACC,CAACvB,EAAMwB,IACJxB,EAAKyB,MAAQ9C,EAAK+C,MAAM,EAAGF,GAAKG,OAAOT,EAAa,GAAK,MAGhEvC,EACGtC,OAAOiF,GAAKA,EAAEzF,OAAqB,UAAZyF,EAAEzF,OAAqByF,EAAE7H,OAChDmI,UACAL,QACC,CAACvB,EAAMwB,IACJxB,EAAK6B,QACHL,EAAM,EAAI7C,EAAK+C,OAAOF,GAAKG,OAAOT,EAAa,GAAK,GAAK,MAI5D,WAAWvC,GACjB,IAAKA,EACH,MAAO,GAET,MAAMmD,EAAyB,GAC/B,IAAK,MAAM9B,KAAQrB,EACjBqB,EAAKjC,SAAW,eAAa6B,WAAWI,EAAKjC,UACzC,GACA4B,KAAKY,WAAWP,EAAKjC,UACzB+D,EAAIrB,KAAKT,GAIX,OAFAL,KAAKoC,YAAYD,GAEVA,EAGD,YAAYnD,GAClB,IAAK,MAAMqB,KAAQrB,EACZqB,EAAKC,MAAKD,EAAKC,IAAM,KAAM,GAChCD,EAAKgC,YAAchC,EAAKgC,aD2EM,OC1E1BhC,EAAKjC,UAAYiC,EAAKjC,SAASpB,OAAS,EAC1CgD,KAAKoC,YAAY/B,EAAKjC,UAEtBiC,EAAKjC,SAAW,GAKtB,YAAYkE,GACAA,EAAI5F,OACZK,OAAQpE,MAAMiJ,QAAQvL,GAAMA,EAAE6G,SAAU,GAG5C,eAAeA,EAAkBoF,GACrBA,EAAI5F,OACZK,OAAQpE,MAAMiJ,QAAQvL,GAAMA,EAAE6G,QAAUA,GAG5C,cAAcR,GACXA,EAAOkB,SAAiBjF,OAC8B,IAArD+D,EAAOK,OAAQpE,MAAM4J,UAAUZ,GAAKA,EAAEzE,SAG1C,oBAAoBR,GAClB,MAAMuE,EAAQvE,EAAOK,OACfyF,EAAevB,EAAMtI,MAAM+D,OAAOiF,GAAKA,EAAEzE,SAASF,OACxDN,EAAOW,cAAe1E,MACpB6J,EAAe,GAAKA,IAAiBvB,EAAMtI,MAAMqE,OACnDN,EAAOY,SAAU3E,MAAQ6J,IAAiBvB,EAAMtI,MAAMqE,Q,WCnI5C,MAAO,EACnB,QAAQyF,GACN,OAAO,IAAIvB,QAAQ,CAACC,EAASuB,KAC3B,MAAM,KAAEC,EAAF,IAAQ3B,EAAR,UAAa4B,EAAb,KAAwBC,EAAxB,GAA8B1D,EAA9B,GAAkCD,EAAlC,QAAsCiB,EAAtC,MAA+CpB,GAAU0D,EAC/D,IAAIjH,EACAsH,EACAC,EACAC,EAEAC,EADAC,GAAS,EAETC,EAAWN,EAAKtD,KAEA,iBAAToD,GACTO,GAAS,EACT1H,EAAQwE,KAAKoD,UAAUT,EAAMF,GAC1BrB,KAAMiC,IAEL,IAAIlB,EAMG,SAPPc,EAAUI,EAEN9C,MAAMC,QAAQ6C,KAChBlB,EAAMkB,EACNP,EAAWX,EAAInF,OACf+F,EAAQD,EACRK,GAAW,IAEXhB,EAAM,kBAAQkB,EAAQrC,SAAT,UAASA,EAAKlC,cAAd,aAAS,EAAaE,KAAM,IAEpCuB,MAAMC,QAAQ2B,KACjBA,EAAM,IAERW,GAAY,kBAAQO,EAAQrC,SAAT,UAASA,EAAKlC,cAAd,aAAS,EAAaC,MAAO,KAAO,GAGzD,OAAO,mBAASoD,KAEjBmB,MAAOC,IACNb,EAAOa,GACA,MAGX/H,EADS+E,MAAMC,QAAQmC,GACfzB,QAAQC,QAAQwB,GAEhBA,EAGLO,IACH1H,EAAQA,EACL4F,KAAMiC,IACLlD,EACGzD,OAAQiF,GAAMA,EAAEjF,QAChBkF,QAAS7J,IACR,MAAM2E,EAAS3E,EAAE2E,OACX8G,EAASxD,KAAKyD,gBAAgB/G,GACpC,GAAsB,IAAlB8G,EAAOxG,OAAc,OACzB,MAAM0G,EAAWhH,EAAOiH,GACA,mBAAbD,EAIXL,EAASA,EAAO3G,OAAQmB,GACtB2F,EAAOI,KAAMC,GAAMH,EAASG,EAAGhG,KAJ/BiG,QAAQC,KAAK,iDAOZV,IAERjC,KAAMiC,IAGL,GAFAJ,EAAUI,EAENT,GAAaC,EAAKxD,MAAO,CAC3B,MAAM2E,EAAejJ,KAAKkJ,KAAKZ,EAAOrG,OAASmC,GAG/C,GAFA6D,EAAQjI,KAAKmJ,IAAI,EAAGhF,EAAK8E,EAAeA,EAAe9E,GACvD4D,EAAWO,EAAOrG,OACd6F,EAAKtD,KACP,OAAO8D,EAAOtB,OAAOiB,EAAQ,GAAK7D,EAAI6D,EAAQ7D,GAIlD,OAAOkE,KAIc,mBAAhBrC,EAAImD,UACb3I,EAAQA,EAAM4F,KAAMiC,GAAWrC,EAAImD,QAASd,EAAQJ,KAGtDzH,EAAQA,EAAM4F,KAAMiC,IAClB,MAAMe,IAAiBpB,GAAS9D,GAAM,IAAM6D,GAAS5D,GACrD,IAAK,IAAI9I,EAAI,EAAGgO,EAAMhB,EAAOrG,OAAQ3G,EAAIgO,EAAKhO,IAAK,CACjD,MAAMiO,EAAYF,EAAe/N,EAAI,EACrCgN,EAAOhN,GAAGyH,QAAUqC,EAAQoE,IAAI,CAACxI,EAAQC,IACvCgE,KAAKzH,IAAI8K,EAAOhN,GAAI0F,EAAQC,EAAOsI,IAIvC,OAAOjB,IAGT7H,EAAM4F,KAAMiC,IAGVlC,EAAQ,CACNjC,GAAI8D,EACJ7D,GAAI4D,EACJhE,MAAO+D,EACP9D,KAAMqE,EACNmB,cACsB,IAAbrB,GAROL,GAAY/D,IACfgE,GAAS5D,GAOmCgE,QAMzD,IACN9C,EACAtE,EACAC,EACAsI,GAEA,GAAIvI,EAAO0I,OAAQ,CACjB,MAAMC,EAAY3I,EAAO0I,OAAOpE,EAAMtE,EAAQC,EAAOsI,GACrD,MAAO,CAAE1K,KAAM8K,GAAa,GAAIC,IAAKD,GAGvC,MAAM/L,EAAQ,kBAAQ0H,EAAMtE,EAAOC,MAAOD,EAAOvB,SACjD,IACIuD,EADAnE,EAAOjB,EAEX,OAAQoD,EAAOxB,MACb,IAAK,MAAO,CACV,MAAMoI,EAAO5G,EAAO6I,IACpB,GAAIjC,GAAQA,EAAK/I,GAAO,CACtB,MAAMiL,EAAWlC,EAAK/I,GACtBA,EAAOiL,EAASjL,KAChBmE,EAAQ8G,EAAS9G,WAEjBnE,EAAO,GAET,OAMJ,MAAO,CAAEA,KAAc,MAARA,EAAeA,EAAO,GAAI+K,IAAKhM,EAAOoF,SAG/C,UAAU+G,EAAarC,GAC7B,MAAM,IAAEsC,EAAF,UAAOnC,EAAP,GAAkB1D,EAAlB,GAAsBC,EAAtB,QAA0BgB,EAA1B,MAAmC6E,GAAUvC,EACnD,IAAIwC,EAAS,GACb,MAAMnG,EAASiG,EAAIjG,OAgBnB,OAfI8D,IACFqC,EAAS,CACP,CAACnG,aAAD,EAACA,EAAQI,IAAeA,EACxB,CAACJ,aAAD,EAACA,EAAQK,IAAeA,IAI5B8F,EAAS,IACJA,KACAF,EAAIE,UACJjF,KAAKkF,gBAAgB/E,MACrBH,KAAKmF,cAAchF,MAClB6E,GAASD,EAAIK,YAAcL,EAAIK,YAAc,IAG5C,WAAS7M,IAAIuM,EAAK,CAAEG,SAAQI,QAASN,EAAIM,UAG1C,gBAAgB3I,GACtB,OAAOA,EAAOK,OAAQpE,MAAM+D,OAAQ4I,IAAoB,IAAdA,EAAEpI,SAGtC,gBAAgBiD,GACtB,IAAIgC,EAAM,GAcV,OAbAhC,EACGzD,OAAQiF,GAAMA,EAAEjF,QAChBkF,QAASU,IACR,MAAM5F,EAAS4F,EAAI5F,OACb8G,EAASxD,KAAKyD,gBAAgB/G,GACpC,IAAI6I,EAA8B,GAC9B7I,EAAOoC,OACTyG,EAAM7I,EAAOoC,OAAQpC,EAAOK,OAAQpE,MAAO2J,GAE3CiD,EAAI7I,EAAOzD,KAAQuK,EAAOe,IAAKlO,GAAMA,EAAEsC,OAAOgI,KAAK,KAErDwB,EAAM,IAAKA,KAAQoD,KAEhBpD,EAGD,cAAchC,GACpB,IAAIgC,EAAM,GAYV,OAXAhC,EACGzD,OAAQiF,IAAD,eAA6B,KAAtB,UAAAA,EAAExF,cAAF,eAAUC,WAAV,UAA8BuF,EAAExF,cAAhC,aAA8B,EAAU3B,WACtDoH,QAASU,IAAO,MACf,IAAIiD,EAA8B,GAG3B,MAFP,UAAIjD,EAAInG,cAAR,OAAI,EAAY2C,OACdyG,EAAMjD,EAAInG,OAAO2C,OAAQwD,EAAKA,EAAInG,OAAO3B,SAEzC+K,EAAIjD,EAAItG,OAAR,UAA2BsG,EAAInG,cAA/B,aAA2B,EAAY3B,QAEzC2H,EAAM,IAAKA,KAAQoD,KAEhBpD,G,gHClLI,4BAAgB,CAC7BlK,KAAM,KACNmC,MAAO,CACL+F,QAASI,MACTiF,OAAQpN,OACRuK,KAAM,CAACtI,OAAQkG,MAAOnI,QACtB8G,GAAIuG,OACJtG,GAAIsG,OACJ1G,MAAO0G,OACPzE,IAAK5I,OACL2M,IAAK3M,OACLyK,KAAMzK,OACNuD,OAAQtB,OACRuB,OAAQxD,OACRsD,WAAY,CACVnB,KAAMmL,QACNlL,SAAS,GAEXqB,SAAU6J,SAEZC,WAAY,CACVC,gBAAA,IACAC,aAAA,IACAC,aAAA,IACAC,eAAA,IACAC,eAAA,KAEF,MAAM5L,GAEJ,MAAM6L,EAAe,IAAI,EACnBC,EAAa,IAAI,EAEjBzK,EAAU,eAAI,GACdK,EAA6B,cAAI,IACjCqK,EAAO,mBAAS,IAAM,oBAAU/L,EAAM2K,KAAO,GAAI9F,IACjDmH,EAAO,mBAAS,IAAM,oBAAUhM,EAAM4G,KAAO,GAAInC,IACjDwH,EAAQ,mBAAS,IAAM,oBAAUjM,EAAM4G,KAAO,GAAI5B,IAClDkH,EAAM,cAAIlM,EAAM8E,IAAM,GACtBqH,EAAM,cAAInM,EAAM+E,IAAM,IACtBqH,EAAS,cAAIpM,EAAM2E,OAAS,GAC5B0H,EAA6B,cAAIrM,EAAMsB,YACvCF,EAAwB,cAAI,KAC3BkL,EAAc/J,GAAkB,oBACjCgK,EAAS,sBAETC,EAAe,CAAC5B,GAAQ,KAC5BvJ,EAAQ9C,OAAQ,EAChBuN,EACG/B,QAAQ,CACPjF,GAAIoH,EAAI3N,MACRwG,GAAIoH,EAAI5N,MACRoG,MAAOyH,EAAO7N,MACdgK,KAAMvI,EAAMuI,KACZoC,IAAKoB,EAAKxN,MACVqI,IAAKoF,EAAKzN,MACVkK,KAAMwD,EAAM1N,MACZiK,WAAW,EACXzC,QAASrE,EAASnD,MAClBqM,UAED5D,KAAMiC,IACL5H,EAAQ9C,OAAQ,OACS,IAAd0K,EAAOnE,KAChBoH,EAAI3N,MAAQ0K,EAAOnE,SAEI,IAAdmE,EAAOlE,KAChBoH,EAAI5N,MAAQ0K,EAAOlE,SAEO,IAAjBkE,EAAOtE,QAChByH,EAAO7N,MAAQ0K,EAAOtE,YAEO,IAApBsE,EAAOmB,UAA4BpK,EAAMsB,aAClD+K,EAAa9N,MAAQ0K,EAAOmB,UAE9BhJ,EAAM7C,MAAQ0K,EAAOrE,OAEtBsE,MAAOuD,IACN,IAAQC,MAAM,UAAUD,MAGxBE,EAAO,CAAC7H,EAAY8H,EAAkBvE,KAC1C6D,EAAI3N,MAAQuG,OACe,IAAhB8H,IACTb,EAAKxN,MAAMsM,OACTxC,GAAWA,EAAQwE,MACf,IAAKd,EAAKxN,MAAMsM,UAAW+B,GAC3BA,GAERJ,KAEIM,EAAS,CAACF,EAAkBvE,KAChCsE,EAAK,EAAGC,EAAavE,IAKjB0E,EAAkBhH,IACtBrE,EAASnD,MAAQsN,EAAa9B,QAAQhE,IAgDxC,oBAAU,KACRgH,EAAe/M,EAAM+F,SACjB/F,EAAMuI,MACRiE,GAAa,KAGjB,MAuBM,KAAEjE,GAAS,iBAAOvI,GACxB,gBAAMuI,EAAkB,KACtBiE,MA8BF,MAAO,CACLnL,UACAK,WACAN,QACAiL,eACAD,SACAF,MACAC,MACAhI,QAhGc,CAACV,EAAiBM,IACL,mBAAbA,EAAIvE,KACduE,EAAIvE,KAAKiE,EAAQM,GACjBA,EAAIvE,MAAQ,GA8FhBqE,UA5FgB,CAChBmJ,EACA/G,EACAiC,IAEO8E,EAAK1K,OAAQyB,IAClB,MAAMkF,EAASlF,EAAImC,IAAKD,EAAMiC,GACxB+E,EAAuC,aAApBlJ,EAAIkE,YAG7B,OAFAlE,EAAImJ,QAAUjE,EACdlF,EAAIoJ,WAAalE,GAAUgE,EACpBhE,GAAUgE,IAmFnB/I,SAhFe,CAAC+B,EAAelC,KAC/B,IAAKA,EAAIH,MACP,OAGa,WADAG,EAAIH,MAAMqC,IAEvB6G,KA2EFH,OACAG,SACA3J,eAzDqB,CACrBiK,EACAlF,EACAtG,KAEAiK,EAAawB,eAAeD,EAAME,OAAOxK,QAASoF,GAClD2D,EAAa0B,oBAAoBrF,EAAI5F,SAoDrCgB,cAlDoB,CAAC4E,EAAgBtG,KAnBlB,EAACsG,EAAgBtG,KACpCsG,EAAI5F,OAAQG,SAAUlE,OAAQ,EAE9B2N,EAAI3N,MAAQ,EACZsN,EAAa2B,cAActF,EAAI5F,QAC/BuJ,EAAa0B,oBAAoBrF,EAAI5F,QACrCkK,KAcAiB,CAAavF,IAkDb3F,iBACAmL,aA3HoBrF,SAEM,KAD1BA,EAAU,CAAEsF,YAAY,EAAMC,cAAc,KAAUvF,IACnCvD,KACjBoH,EAAI3N,MAAQ8J,EAAQvD,SAEI,IAAfuD,EAAQtD,KACjBoH,EAAI5N,MAAQ8J,EAAQtD,IAElBsD,EAAQsF,aACVtF,EAAQuF,cAAe,GAErBvF,EAAQuF,eACVxM,EAAM7C,MAAQ,IAEhBwO,EAAgB1E,EAAQtC,SAAW/F,EAAM+F,SACrCsC,EAAQsF,YACVnB,KA4GF5I,MA7CY,CAACqC,EAAeiC,KAC5B,MAAMtB,EAAMsB,EAAItE,MAAOqC,GACJ,iBAARW,GACT2F,EAAO7F,KAAKE,IA2Cd7D,gBAjEsB,CAACmF,EAAgBtG,KACvCiK,EAAa0B,oBAAoBrF,EAAI5F,SAiErCpB,YAxCkB,CAClBkM,EACAS,EACAC,KAKA,GAHqB,MAAjBV,EAAMW,SACRpB,EAAKS,EAAMW,SAETD,EAAM,CACR,MAAM,MAAEE,EAAF,OAASrM,GAAWmM,EAC1BpM,EAASnD,MAAMiJ,QAAS7J,IACtBA,EAAEoE,OAAS,IACNpE,EAAEoE,OACL3B,QAASzC,EAAEkB,OAAQ8C,aAAV,EAAUA,EAAQ9C,KAAMmP,OAAQC,OA4B/CC,UAtBiBvJ,GAAkB,IAAIA,KAuBvCwJ,cAtIoB,KACpBxB,EAAKT,EAAI3N,Y,YC1Hf,EAAOsC,OAAS,EAChB,EAAOC,UAAY,kBAEJ,QCJf,EAAGC,QAAWC,IACZA,EAAIC,UAAU,EAAGpD,KAAM,IAIV,MADwB,E,mGCRhC0B,MAAM,e,GACJA,MAAM,c,GAeNA,MAAM,a,SACeA,MAAM,Q,GAGzBA,MAAM,Q,GACJA,MAAM,O,IACLA,MAAM,S,UAQgBA,MAAM,U,IAI7BA,MAAM,O,UACJA,MAAM,Q,UAGcA,MAAM,S,gOAtCvC,sBA6CM,MA7CN,EA6CM,CA5CJ,sBAcM,MAdN,EAcM,CAbY,EAAAgF,OAAO6J,WACrB,qBAA+B,0C,sBAEjC,sBASe,G,MATMC,UAAU,K,WACV,IAAqB,E,wBAAxC,sBAOoB,qCAPc,EAAAC,MAARC,I,sBAA1B,sBAOoB,GAPsB1P,IAAK0P,EAAK/O,M,WAClD,IAEc,CAFK+O,EAAKC,M,sBAAxB,sBAEc,G,MAFiBC,GAAIF,EAAKC,M,WACtC,IAAe,C,oDAAZD,EAAK/O,MAAI,K,0CAEd,sBAEW,oB,oDADN+O,EAAK/O,MAAI,I,uCAKpB,sBA2BM,MA3BN,EA2BM,CA1BO,EAAA+E,OAAOmK,M,sBAAlB,sBAEM,MAFN,EAEM,CADJ,qBAAyB,iC,wCAE3B,sBAsBM,MAtBN,EAsBM,CArBJ,sBAYM,MAZN,EAYM,CAXJ,sBAOK,KAPL,GAOK,CANa,EAAAnK,OAAOrC,MACrB,qBAA0C,kB,MAAtBA,MAAO,EAAAyM,a,6BAE7B,sBAEW,oB,oDADN,EAAAA,QAAM,I,SAGF,EAAApK,OAAOqK,Q,sBAAlB,sBAEM,MAFN,GAEM,CADJ,qBAA2B,mC,0CAG/B,sBAOM,MAPN,GAOM,CANoB,EAAArK,OAAOnE,S,sBAA/B,sBAEM,MAFN,GAEM,CADJ,qBAAa,oC,wCAEJ,EAAAmE,OAAOsK,O,sBAAlB,sBAEM,MAFN,GAEM,CADJ,qBAA0B,kC,8CAKlC,qBAAwB,iCCvCb,iCAAgB,CAC7BhR,KAAM,cACNmC,MAAO,CACLkC,MAAOjC,QAET,MAAMD,GAAK,MACT,MAAM8O,EAAQ,qBACRC,EAAW,eAAaC,QAAQF,EAAMG,SAEtCX,EAAQS,EAAW,cAAYG,aAAaH,aAAzB,EAAyBA,EAAUR,MAAQ,GAChEQ,IAAY,yBAAaC,QAAQV,UAArB,eAA6BE,QAASO,EAASR,MAC7DD,EAAM5H,KAAK,CACTlH,KAAMuP,EAASlR,KACf2Q,KAAMO,EAASR,OAGnB,MAAMI,EAAS,mBACb,kBAAM3O,EAAMkC,QAAN,UAAe,eAAa8M,QAAQV,UAApC,aAAe,EAA6B9O,QAGpD,MAAO,CAAE8O,QAAOK,a,MCrBpB,GAAO9N,OAAS,GAChB,GAAOC,UAAY,kBAEJ,UCHf,GAAWC,QAAWC,IACpBA,EAAIC,UAAU,GAAWpD,KAAM,KAIlB,OADwC,G,qCCHxC,iCAAgB,CAC7BA,KAAM,WACN0N,WAAY,CACVE,aAAA,KAEFzL,MAAO,CACLmP,SAAUhJ,MACV1C,OAAQzF,OACRmC,KAAM,CAAEA,KAAMF,OAAQG,QAAS,QAC/BgP,mBAAoB,CAAEjP,KAAMmL,QAASlL,SAAS,IAEhD,MAAMJ,GACJ,MAAMqP,EAAgB,CAACF,EAAsBlJ,IACpCkJ,EAAS7M,OAAQgN,IACtB,MAAMrG,GAASqG,EAAQpJ,KAAMoJ,EAAQpJ,IAAIlG,EAAMyD,QACzCwJ,EAA2C,aAAxBqC,EAAQrH,YAWjC,OAVAqH,EAAQpC,QAAUjE,EAClBqG,EAAQnC,WAAalE,GAAUgE,EAC/BqC,EAAQC,UAAY,eAAa1J,WAAWyJ,EAAQtL,UAChD,GACAqL,EAAcC,EAAQtL,SAAWiC,GACrCqJ,EAAQE,MACkB,mBAAjBF,EAAQ9P,KACX8P,EAAQ9P,KAAKyG,EAAMqJ,GACnBA,EAAQ9P,MAAQ,GACtB8P,EAAQnP,KAAOmP,EAAQnP,MAAQ,UACxB8I,GAAUgE,IAiBrB,MAAO,CAAEwC,UAbS,mBAAS,IAClBzP,EAAMyD,OACT4L,EAAerP,EAAMmP,UAA2B,GAAInP,EAAMyD,QAC1D,IAUciM,aAPE3L,IACpB,IAAKA,EAAIH,MACP,OAEaG,EAAIH,MAAM5D,EAAMyD,aC3CrC,GAAO5C,O,qSCFe,SAAJ,EAAAV,M,wBACd,sBAsBO,wCAtBa,EAAAsP,UAAP1L,I,sBAAb,sBAsBO,QAtByBlF,IAAKkF,EAAIvE,KAAMD,MAAM,a,CACjCwE,EAAIwL,UAAU3M,OAAM,G,sBAAtC,sBAgBa,WAZA+M,SAAQ,kBACjB,IASS,CATT,sBASS,Q,0BAPL,IAA+B,E,wBADjC,sBAOc,qCANK5L,EAAIwL,UAAdtL,I,sBADT,sBAOc,GALXpF,IAAKoF,EAAOuL,MACZ,QAAK,GAAE,EAAAE,aAAazL,I,2BAErB,IAAmC,CAAnC,sBAAmC,QAA7B,UAAQA,EAAOuL,O,sBACrB,sBAA4B,KAAxBjQ,MAAO0E,EAAOG,M,kFAXxB,IAEO,CAFP,sBAEO,aADL,sBAA0D,UAAtD,sBAAgC,QAA1B,UAAQL,EAAIyL,O,yBAAe,sBAAgB,S,mCAezD,sBAGI,K,MAHO,QAAK,GAAE,EAAAE,aAAa3L,I,CAC7B,sBAAgC,QAA1B,UAAQA,EAAIyL,O,sBAClB,sBAAyB,KAArBjQ,MAAOwE,EAAIK,M,0DAKnB,sBA6BiB,W,0BA5BL,IAAiC,E,wBAA3C,sBA2BW,qCA3BsB,EAAAqL,UAAS,CAAxB1L,EAAKnC,K,4DAA2BmC,EAAIvE,M,CAClCuE,EAAIwL,UAAU3M,OAAM,G,sBAAtC,sBAkBa,WAZAF,QAAO,kBAChB,IASS,CATT,sBASS,Q,0BAPL,IAA+B,E,wBADjC,sBAOc,qCANKqB,EAAIwL,UAAdtL,I,sBADT,sBAOc,GALXpF,IAAKoF,EAAOuL,MACZ,QAAK,GAAE,EAAAE,aAAazL,I,2BAErB,IAAmC,CAAnC,sBAAmC,QAA7B,UAAQA,EAAOuL,O,sBACrB,sBAA4B,KAAxBjQ,MAAO0E,EAAOG,M,kFAbxB,IAIY,CAJZ,sBAIY,GAHTjE,KAAM,EAAAiP,oBAAgC,IAAVxN,EAAK,UAAqBmC,EAAI5D,KAC1DiE,KAAML,EAAIK,M,2BACV,IACF,CADE,sBACF,QADQ,UAAQL,EAAIyL,O,wFAevB,sBAMY,G,MAJTrP,KAAM,EAAAiP,oBAAgC,IAAVxN,EAAK,UAAqBmC,EAAI5D,KAC1DiE,KAAML,EAAIK,KACV,QAAK,GAAE,EAAAsL,aAAa3L,I,2BACpB,IACF,CADE,sBACF,QADQ,UAAQA,EAAIyL,O,qFDhDd,UEAf,GAASzO,QAAWC,IAClBA,EAAIC,UAAU,GAASpD,KAAM,KAIhB,OADoC,G,4CCHpC,6BAAgB,CAC7BA,KAAM,eACN0N,WAAY,CACVqE,eAAA,KACAC,cAAA,MAEF7P,MAAO,CACL8P,WAAY7P,OACZ8P,YAAa,CACX5P,KAAMF,OACNG,QAAS,UAGb,MAAMJ,EAAOgQ,GACX,MAAMC,EAAQ,mBAAiBjQ,EAAOgQ,GAEhCE,EAAS,KACbF,EAAQG,KAAK,oBAAqBF,EAAM1R,QAO1C,MAAO,CAAE0R,QAAOC,SAAQE,MALV,KACZH,EAAM1R,MAAQ,GACd2R,SCxBN,GAAOrP,O,8LCFL,sBAKU,GALAkP,YAAa,EAAAA,YAAqBxR,MAAO,EAAA0R,M,gCAAA,EAAAA,MAAK,GAAG,QAAK,mBAAQ,EAAAC,OAAM,Y,CACjEG,OAAM,kBACf,IAA6C,CAAxB,EAAAJ,O,sBAArB,sBAA6C,G,MAAhB,QAAO,EAAAG,O,4CACpC,sBAAyC,G,MAAjB,QAAO,EAAAF,Q,kEDCtB,UEAf,GAAYnP,QAAWC,IACrBA,EAAIC,UAAU,GAAYpD,KAAM,KAInB,OAD0C,G,qGCD9C0B,MAAM,S,IACNA,MAAM,U,kKARf,sBAmBQ,GAnBA+Q,OAAQ,EAAAC,GAAGD,Q,YAEf,IAA4B,E,wBAD9B,sBAiBQ,qCAhBW,EAAAC,GAAGlI,QAAbmI,I,sBADT,sBAiBQ,GAfL3R,IAAK2R,EAAOC,MACblR,MAAK,CAAC,OACEiR,EAAOE,U,YAEf,IAA2C,CAA3C,sBAA2C,MAA3C,GAA2C,0BAArBF,EAAOC,OAAK,GAClC,sBASM,MATN,GASM,CANID,EAAOG,YAFf,qBAIQ,SAHCH,EAAOG,YAAW,C,MAExBpS,MAAOiS,EAAOjS,Y,6BAEjB,sBAEW,oB,oDADNiS,EAAOjS,OAAK,I,+DCPnB,MAAO,GAOX,YAAYiS,EAAsBjI,EAASqI,EAAa,IAJxD,KAAA1I,IAAM,EAKJ,MAAM,MAAEuI,EAAF,MAASlS,EAAT,YAAgBoS,GAAgBH,EACtC5K,KAAK6K,MAAyB,iBAAVA,EAAqBA,EAAQA,EAAMlI,GACvD3C,KAAK+K,YAAcA,EACnB,MAAM1H,EACa,iBAAV1K,EACH,kBAAQgK,EAAMhK,GACdA,EACAA,EAAMgK,GACN,KACN3C,KAAKrH,MAAkB,MAAV0K,EAAiB2H,EAAa3H,GAYzC,MAAO4H,GAOX,YAAYN,EAAYhI,GACtB,MAAM,WAAEqI,EAAF,QAAcvI,EAAd,OAAuBiI,EAAvB,WAA+BQ,EAA/B,IAA2C5I,GAAQqI,EACzD3K,KAAKgL,WAAaA,GAAc,IAChChL,KAAK0K,OAASA,GAAU,GACxB1K,KAAKkL,WAAaA,EAAaA,EAAa,KAAO,GACnDlL,KAAKsC,IAAMA,GAAO,EAClBtC,KAAKyC,QAAUA,EAAQ8B,IAAK4G,IAC1B,MAAMP,EAAS,IAAI,GAASO,EAASxI,EAAM3C,KAAKgL,YAEhD,OADAJ,EAAOtI,IAAM6I,EAAQ7I,KAAOtC,KAAKsC,IAC1BsI,KCjDE,iCAAgB,CAC7B3S,KAAM,KACNmC,MAAO,CACLgR,IAAKhT,OACLuK,KAAMvK,QAER,MAAMgC,GACJ,MAAMuQ,EAAK,cAAI,IAcf,OAbA,gBACEvQ,EACA,EAAGgR,MAAKzI,WACN,MAAM0I,EAAQ,IAAIJ,GAAGG,EAAYzI,GACjC0I,EAAM5I,QAAU4I,EAAM5I,QAAQ8B,IAAKqG,IACjCA,EAAOE,QAAU,kBAAgBQ,SAASV,EAAOtI,KAC1CsI,IAETD,EAAGhS,MAAQ0S,GAEb,CAAEE,WAAW,IAGR,CAAEZ,S,MCrBb,GAAO1P,OAAS,GAChB,GAAOC,UAAY,kBAEJ,UCHf,GAAGC,QAAWC,IACZA,EAAIC,UAAU,GAAGpD,KAAM,KAIV,OADwB,G,uWCRrC,sBA0DM,YAzDJ,sBAwCS,GAvCNoS,MAAO,EAAAmB,KACR9R,IAAI,UACH+R,QAAQ,YAAAC,cAAA,mBAAQC,UAAR,eAAYF,SAAM,c,YAE3B,IAkCQ,CAlCR,sBAkCQ,Q,WAhCJ,IAAqB,E,wBADvB,sBAgCQ,qCA/BS,EAAAG,MAARvL,I,sBADT,sBAgCQ,GA9BLpH,IAAKoH,EAAKsL,GAAGE,KACbC,KAAMzL,EAAKsL,GAAGjB,OAAOoB,M,YAEtB,IA0Bc,CAzBNzL,EAAKd,M,sBADb,sBA0Bc,G,MAxBXsL,MAAO,EAAAlM,OAAO0B,EAAKsL,GAAGE,WAAQxD,EAAYhI,EAAK/D,MAC/CrE,KAAMoI,EAAKsL,GAAGE,KACdE,MAAO1L,EAAKsL,GAAGI,MACfpS,MAAO0G,EAAKsL,GAAGhS,MACfqS,MAAK,OAAW3L,EAAKsL,GAAGjB,OAAOuB,cAC/BC,WAAU,C,KAAyB,EAAK,GAAG,OAAO,Y,OAAoC,EAAK,GAAG,OAAO,cAIrGC,SAAQ,C,KAAyB,EAAK,GAAG,OAAO,U,OAAkC,EAAK,GAAG,OAAO,a,kCAQlG,IAMa,E,sBANb,sBAMa,kCAFN9L,EAAKsL,GAAGS,QAAM,CAHlBT,GAAItL,EAAKsL,GACTD,OAAQrL,E,WACA,EAAAmL,KAAKnL,EAAKsL,GAAGE,M,yBAAb,EAAAL,KAAKnL,EAAKsL,GAAGE,MAAI,EAEzBnS,IAAK,EAAA2S,QAAQhM,EAAKsL,GAAGE,O,oEARR,EAAAlN,OAAO0B,EAAKsL,GAAGE,M,MAAQ,Q,MACrC,IAAiD,CAAjD,qBAAiD,SAApCxL,EAAKsL,GAAGE,KAAI,CAAGH,OAAQrL,QAAI,c,uLAavC,EAAAiM,S,sBAAX,sBAeM,O,MAfe3S,MAAO,EAAA2S,QAAQC,W,CAClC,sBAaQ,GAbDhS,KAAK,OAAQiS,QAAS,EAAAF,QAAQR,KAAI,e,YACvC,IAWQ,CAXR,sBAWQ,GAXDnS,MAAM,aAAcmS,KAAM,EAAAQ,QAAQR,M,YACvC,IAEa,CAFI,EAAAQ,QAAQG,U,+DAAzB,sBAEa,G,MAFwB,QAAO,EAAAC,MAAO/S,MAAM,S,YAAQ,IAE/D,C,oDADA,EAAA2S,QAAQK,WAAS,W,qBAKV,EAAAL,QAAQM,W,wFAHjB,sBAMC,G,MALCrS,KAAK,UACJ,QAAO,EAAAsS,Q,YAGP,IAAgC,C,oDAA7B,EAAAP,QAAQQ,YAAU,W,sHCOrBC,GAAatU,OAAO,QACpBuU,GAAgBvU,OAAO,WAEvBwU,GAAiB,CAC5BC,OAAQ,EACRjB,aAAc,OACdkB,UAAW,EACXC,YAAa,GACbtB,KAAM,I,uGChEO,6BAAgB,CAC7B7T,KAAM,WACNmC,MAAO,CACL8P,WAAY,CAAC7P,OAAQoL,OAAQC,SAC7BiG,GAAIvT,OACJsT,OAAQtT,QAEVuN,WAAY,CACV,CAAC,KAAM1N,MAAO,KACd,CAAC,KAAMoV,SAASpV,MAAO,KAAMoV,UAE/BC,MAAK,CAAClT,EAAOgQ,KAGJ,CAAEmD,OAFM,mBAAcnT,EAAOgQ,OCdxC,GAAOnP,O,4HCDG,EAAA0Q,GAAG6B,c,sBADX,sBAKE,G,MAHQ7U,MAAO,EAAA4U,O,gCAAA,EAAAA,OAAM,GACpBpD,YAAa,EAAAwB,GAAGxB,YAChBsD,SAAU,EAAA/B,OAAOgC,U,mEAEpB,sBAKW,G,MAHRvD,YAAa,EAAAwB,GAAGxB,YACTxR,MAAO,EAAA4U,O,gCAAA,EAAAA,OAAM,GACpBE,SAAU,EAAA/B,OAAOgC,U,6CDNP,UELD,MAAgBC,GAC5B,SAAShV,GACP,OAAa,MAATA,EACK,KAEFqH,KAAK4N,cAAcjV,ICHhB,MAAO,WAAoBgV,GACvC,cAAchV,GACZ,MAAO,GAAGA,GC2Bd,MAAMkV,GAAa,CACjBC,OAAQ,GACRC,OAAQ,GACRC,IChCY,cAAwBL,GACpC,cAAchV,GACZ,OAAOA,ID+BTsV,OEjCY,cAA2BN,GACvC,cAAchV,GACZ,MAAqB,iBAAVA,EACFA,EAAMqE,OAAS,GAAKrE,EAAQ,MAE7BA,IF6BVuV,QGlCY,cAA2BP,GACvC,cAAchV,GACZ,QAASA,KHmCE,iCAAgB,CAC7BV,KAAM,KACNmC,MAAO,CACLsR,OAAQtT,OACR0B,MAAOO,OACP8T,OAAQ/V,OACRgW,SAAUhW,QAEZiW,MAAO,CACLC,WAAY,KACZC,UAAW,MAEb5I,WAAY,CACV,CAAC,KAAK1N,MAAO,KACb,CAAC,KAAKuW,KAAKvW,MAAO,KAAKuW,KACvB,CAAC,KAAIvW,MAAO,KACZ,CAAC,KAAIA,MAAO,KACZ,CAAC,KAAOA,MAAO,MAEjBwW,WAAY,CACVC,WAAY,IAAI,cAElB,MAAMtU,EAAOgQ,GACX,MAAMuE,EAAmC,cAAI,MACvC/C,EAAe,mBAAS,IACxBJ,EAA+B,mBAAS,IACxCpR,EAAMgU,UAAY,KAExB,kBAAQrB,GAAYvB,GACpB,kBAAQwB,GAAe2B,GAUvB,IAAIC,EAAyC,GAW7C,gBACE,IAAMxU,EAAMsR,OACXA,IAAU,MACTkD,EAAiB,GACjB,MAAMC,EAAe,IAChB5B,OACCvB,SAAA,UAAAA,EAAQC,UAAR,eAAYjB,SAAU,IAEtBoE,EAAapD,EAAOoD,WAC1B1W,OAAO2W,KAAKD,GAAYlN,QAAS3I,IAC/B,MAAMoH,EAAkB,IAAKyO,EAAW7V,IACxCoH,EAAKsL,GAAK,IAAMtL,EAAKsL,IAAM,IAC3BtL,EAAKsL,GAAGS,OAAS,kBAAQ/L,EAAKsL,GAAGS,QAAU,IAC3C/L,EAAKsL,GAAGxB,YAAc9J,EAAKsL,GAAGxB,aAAe,MAAM9J,EAAK/D,MACxD+D,EAAKsL,GAAGE,KAAO5S,EACfoH,EAAKsL,GAAGI,MACW,MAAjB1L,EAAKsL,GAAGI,MACJ,GACAxL,MAAMC,QAAQH,EAAKsL,GAAGI,OACtB1L,EAAKsL,GAAGI,MACR,CAAC1L,EAAKsL,GAAGI,OACf,MAAMxR,EAAQ8F,EAAK9F,KAAO8F,EAAK9F,MAAQ,SACvC,GAAI8F,EAAK2O,SAAU,CACI3O,EAAKsL,GAAGI,MAAMkD,KAChCzW,IAA0B,IAAfA,EAAEwW,WAGd3O,EAAKsL,GAAGI,MAAMjL,KA/CA,EAACT,EAAiB9F,KACjC,CACLyU,UAAU,EACVE,UAAW7O,EAAK/D,MAChBrC,QAAS,iBACTM,OACA4U,UAAYxW,IAAe,IAAIkV,GAAWtT,IAAQ6U,SAASzW,KAyClC0W,CAAgBhP,EAAM9F,IAGzC8F,EAAKsL,GAAG2D,UACVjP,EAAKsL,GAAGI,MAAMjL,KAAK,IACdT,EAAKsL,GAAG2D,SACXC,UAAWlP,EAAKsL,GAAG2D,SAASC,UAAU/D,KAGrCnL,EAAKsL,GAAG6D,QACX5D,EAAM9K,KAAKT,GAEbA,EAAKsL,GAAGjB,OAAS,IAAKmE,KAAkBxO,EAAKsL,GAAGjB,QAAU,MAE5DkB,EAAMhK,QAASvB,IACb,GAAIA,EAAKsL,GAAG8D,UAAW,CACrB,MAAMC,EAAYtX,OAAO2W,KAAK1O,EAAKsL,GAAG8D,WAAWlL,IAAKtL,IAC/CuS,EAAKjS,eAAeN,KACvBuS,EAAKvS,GAAO,MAEP,gBAAMuS,EAAMvS,KAErB,gBACEyW,EACClM,IACC,IAAImM,GAAO,EACXnM,EAAO5B,QAAQ,CAACjJ,EAAOqD,KACrB,MAAM4T,EAAexX,OAAOoL,OAAOnD,EAAKsL,GAAG8D,WAIrC9L,EAAKpD,MAAMC,QAAQoP,EAAa5T,IAClC,IAAO4T,EAAa5T,GAAiB6T,SAASlX,GAC7CiX,EAAa5T,GAClB2T,EAAOA,GAAQhM,EAAGhL,KAEpB0H,EAAKd,KAAOoQ,GAEd,CAAEpE,WAAW,SAGflL,EAAKd,MAAO,KAIlB,CAAEgM,WAAW,IAGf,gBACE,IAAMnR,EAAMgU,SACXzL,IACCA,EAAOA,GAAQ,GACf,MAAMmN,EAAS,IAAIC,IAAI3X,OAAO2W,KAAKvD,IACnCpT,OAAO2W,KAAKpM,GAAMf,QAAS3I,IACzB6W,EAAOE,IAAI/W,KAEbsH,MAAM0P,KAAKH,GAAQlO,QAAS3I,IAC1BuS,EAAKvS,QAAqBoP,IAAd1F,EAAK1J,GAAqB0J,EAAK1J,GAAOuS,EAAKvS,OAK7D,MAAMqT,EAAU,mBAAS,IACF,OAAjBlS,EAAM+T,OACD,KAEF/T,EAAM+T,QAAU,IAYzB,MAAO,CACLvC,QACA+C,UACAnD,OACAqB,OAba,KACZ8B,EAAQhW,MAAc2W,WAAWlO,KAAK,KACrCgJ,EAAQG,KAAK,aAAciB,MAY7BkB,MATY,KACZtC,EAAQG,KAAK,YAAaiB,IAS1Bc,UACA4D,eApHsB7W,GACfuV,EAAevV,GAoHtBgT,QAzHeR,GAAkBlR,IACjCiU,EAAe/C,GAAQlR,O,MI7E7B,GAAOM,OAAS,GAChB,GAAOC,UAAY,kBAEJ,UCDT,SAAUiV,GACdnR,EACAoP,EACAV,GAEA,OARY,MAQA1O,GAAUuB,MAAMC,QAAQxB,IAAyB,IAAhBA,EAAKhC,QAC3B,iBAAZgC,EAAK,KACdA,EAAOA,EAAKuF,IAAKlE,IACR,CAAEwK,MAAOxK,EAAM1H,MAAO0H,MAG7B+N,IACG7N,MAAMC,QAAQ4N,KAAWA,EAAW,CAACA,IAC1CpP,EAAK4C,QAASvB,KACP+N,EAASgC,QAAQ/P,EAAK1H,SAAQ0H,EAAKnD,SAAU,MAIlDwQ,GACF1O,EAAK4C,QAASvB,GAAyBA,EAAKoN,UAAW,GAElDzO,GAhBgE,GA2BnE,SAAUqR,GAAQ3E,EAAmBC,EAAqByC,GAC9D,OAAIzC,EAAG2E,UACE3E,EACJ2E,YACAlP,KAAMpC,GAASmR,GAAQnR,EAAMoP,EAAU1C,EAAOgC,WAG5CxM,QAAQC,QAfX,SACJnC,EACAoP,EACAV,GAEA,OAAOyC,GAAQ,mBAASnR,GAAQ,IAAKoP,EAAUV,GAW7C6C,CACE7E,EAAO8E,MACPpC,EACA1C,EAAOgC,WAKP,SAAU+C,GAAelM,GAC7B,OAAOnM,OAAO2W,KAAKxK,GAAKA,IAAKtL,IAAD,CAC1B4R,MAAOtG,EAAItL,GACXN,MAAOM,KCrDX,GAAGkC,QAAWC,IACZA,EAAIC,UAAU,GAAGpD,KAAM,KAIV,OADwB,G,qGCRhC0B,MAAM,iB,IACJA,MAAM,U,IAIJA,MAAM,S,yEALf,sBAYM,MAZN,GAYM,CAXJ,sBAOM,MAPN,GAOM,CANJ,sBAEM,YADJ,qBAAyB,gCAE3B,sBAEM,MAFN,GAEM,CADJ,qBAA0B,mCAG9B,sBAEM,YADJ,qBAA4B,uCCTnB,iCAAgB,CAC7B1B,KAAM,kB,MCER,GAAOgD,OAAS,GAChB,GAAOC,UAAY,kBAEJ,UCHf,GAAaC,QAAWC,IACtBA,EAAIC,UAAU,GAAapD,KAAM,KAIpB,OAD4C,GCL5C,iCAAgB,CAC7BA,KAAM,OACNmC,MAAO,CACLsW,OAAQtY,OACRO,MAAO,CAAC8M,OAAQpL,SAElBiT,MAAK,KACI,CAAEqD,SAAA,eCRb,GAAO1V,O,qGCFL,sBAAsE,GAA9D8C,MAAK,UAAE,EAAA2S,OAAO,EAAA/X,cAAT,aAAE,EAAeoF,O,2BAAO,iBAAyB,C,8DAAtB,EAAA2S,OAAO,EAAA/X,c,aAAP,EAAeiB,MAAI,M,mBDI9C,UEAf,GAAKuB,QAAWC,IACdA,EAAIC,UAAU,GAAKpD,KAAM,KAIZ,OAD4B","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"), require(\"@blazes/utils\"), require(\"@blazes/theme\"), require(\"ant-design-vue/lib/form\"), require(\"ant-design-vue/lib/input\"), require(\"@ant-design/icons-vue/DownOutlined\"), require(\"vue-router\"), require(\"ant-design-vue/lib/row\"), require(\"ant-design-vue/lib/col\"), require(\"ant-design-vue/lib/button\"), require(\"@ant-design/icons-vue/LoadingOutlined\"), require(\"@ant-design/icons-vue/EditOutlined\"), require(\"@ant-design/icons-vue/DeleteOutlined\"), require(\"@ant-design/icons-vue/FilterOutlined\"), require(\"ant-design-vue/lib/message\"), require(\"@ant-design/icons-vue/SearchOutlined\"), require(\"@ant-design/icons-vue/CloseOutlined\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([, \"@blazes/utils\", \"@blazes/theme\", \"ant-design-vue/lib/form\", \"ant-design-vue/lib/input\", \"@ant-design/icons-vue/DownOutlined\", \"vue-router\", \"ant-design-vue/lib/row\", \"ant-design-vue/lib/col\", \"ant-design-vue/lib/button\", \"@ant-design/icons-vue/LoadingOutlined\", \"@ant-design/icons-vue/EditOutlined\", \"@ant-design/icons-vue/DeleteOutlined\", \"@ant-design/icons-vue/FilterOutlined\", \"ant-design-vue/lib/message\", \"@ant-design/icons-vue/SearchOutlined\", \"@ant-design/icons-vue/CloseOutlined\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"vue\"), require(\"@blazes/utils\"), require(\"@blazes/theme\"), require(\"ant-design-vue/lib/form\"), require(\"ant-design-vue/lib/input\"), require(\"@ant-design/icons-vue/DownOutlined\"), require(\"vue-router\"), require(\"ant-design-vue/lib/row\"), require(\"ant-design-vue/lib/col\"), require(\"ant-design-vue/lib/button\"), require(\"@ant-design/icons-vue/LoadingOutlined\"), require(\"@ant-design/icons-vue/EditOutlined\"), require(\"@ant-design/icons-vue/DeleteOutlined\"), require(\"@ant-design/icons-vue/FilterOutlined\"), require(\"ant-design-vue/lib/message\"), require(\"@ant-design/icons-vue/SearchOutlined\"), require(\"@ant-design/icons-vue/CloseOutlined\")) : factory(root[\"Vue\"], root[\"@blazes/utils\"], root[\"@blazes/theme\"], root[\"ant-design-vue/lib/form\"], root[\"ant-design-vue/lib/input\"], root[\"@ant-design/icons-vue/DownOutlined\"], root[\"vue-router\"], root[\"ant-design-vue/lib/row\"], root[\"ant-design-vue/lib/col\"], root[\"ant-design-vue/lib/button\"], root[\"@ant-design/icons-vue/LoadingOutlined\"], root[\"@ant-design/icons-vue/EditOutlined\"], root[\"@ant-design/icons-vue/DeleteOutlined\"], root[\"@ant-design/icons-vue/FilterOutlined\"], root[\"ant-design-vue/lib/message\"], root[\"@ant-design/icons-vue/SearchOutlined\"], root[\"@ant-design/icons-vue/CloseOutlined\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__8__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__17__, __WEBPACK_EXTERNAL_MODULE__18__, __WEBPACK_EXTERNAL_MODULE__19__, __WEBPACK_EXTERNAL_MODULE__20__, __WEBPACK_EXTERNAL_MODULE__21__, __WEBPACK_EXTERNAL_MODULE__22__, __WEBPACK_EXTERNAL_MODULE__23__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = __WEBPACK_EXTERNAL_MODULE__17__;","module.exports = __WEBPACK_EXTERNAL_MODULE__18__;","module.exports = __WEBPACK_EXTERNAL_MODULE__19__;","module.exports = __WEBPACK_EXTERNAL_MODULE__20__;","module.exports = __WEBPACK_EXTERNAL_MODULE__21__;","module.exports = __WEBPACK_EXTERNAL_MODULE__22__;","module.exports = __WEBPACK_EXTERNAL_MODULE__23__;","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=0&id=2f86d144&lang=less&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=0&id=5801405a&lang=less&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=1&id=5801405a&lang=less\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=0&id=36f8c908&lang=less&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=0&id=601ef8f4&lang=less&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=0&id=a5e051da&lang=less&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--12-0!./index.vue?vue&type=style&index=0&id=0c1fa5aa&lang=less&scoped=true\"","<template>\r\n  <div ref=\"wrapperRef\">\r\n    <div v-if=\"mode === 'normal'\">\r\n      {{ text }}\r\n    </div>\r\n    <a-popover\r\n      v-else\r\n      placement=\"top\"\r\n      :width=\"400\"\r\n      :content=\"relTooltip\"\r\n      trigger=\"hover\"\r\n      :overlayClassName=\"popperClass\"\r\n    >\r\n      <div class=\"ellipsis\">{{ text }}</div>\r\n      <slot name=\"content\">\r\n        <div>{{ relTooltip }}</div>\r\n      </slot>\r\n    </a-popover>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { toNum } from \"@blazes/utils\";\r\nimport { defineComponent, onMounted, Ref, ref } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"ellipsis\",\r\n  props: {\r\n    text: String,\r\n    toolTip: String,\r\n    popperClass: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  setup(props) {\r\n    const relTooltip = props.toolTip || props.text;\r\n    const mode = ref(\"normal\");\r\n    const wrapperRef: Ref<HTMLDivElement | null> = ref(null);\r\n    onMounted(() => {\r\n      setTimeout(() => {\r\n        const el = wrapperRef.value;\r\n        const { lineHeight, height } = getComputedStyle(el as HTMLDivElement);\r\n        if (Math.abs(toNum(lineHeight) - toNum(height)) > 1) {\r\n          mode.value = \"ellipsis\";\r\n        }\r\n      }, 100);\r\n    });\r\n\r\n    return { mode, relTooltip, wrapperRef };\r\n  },\r\n});\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.ellipsis {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n</style>\r\n","\r\nimport { toNum } from \"@blazes/utils\";\r\nimport { defineComponent, onMounted, Ref, ref } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"ellipsis\",\r\n  props: {\r\n    text: String,\r\n    toolTip: String,\r\n    popperClass: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  setup(props) {\r\n    const relTooltip = props.toolTip || props.text;\r\n    const mode = ref(\"normal\");\r\n    const wrapperRef: Ref<HTMLDivElement | null> = ref(null);\r\n    onMounted(() => {\r\n      setTimeout(() => {\r\n        const el = wrapperRef.value;\r\n        const { lineHeight, height } = getComputedStyle(el as HTMLDivElement);\r\n        if (Math.abs(toNum(lineHeight) - toNum(height)) > 1) {\r\n          mode.value = \"ellipsis\";\r\n        }\r\n      }, 100);\r\n    });\r\n\r\n    return { mode, relTooltip, wrapperRef };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=2f86d144&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=2f86d144&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2f86d144\"\n\nexport default script","import { App } from \"vue\";\r\nimport Ellipsis from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nEllipsis.install = (app: App): void => {\r\n  app.component(Ellipsis.name, Ellipsis);\r\n};\r\n\r\nconst _Ellipsis: SFCWithInstall<typeof Ellipsis> = Ellipsis as any;\r\nexport default _Ellipsis;\r\n","<template>\r\n  <div class=\"st\">\r\n    <a-table\r\n      @change=\"changeTable\"\r\n      :data-source=\"data$\"\r\n      :loading=\"loading\"\r\n      :pagination=\"\r\n        isPagination\r\n          ? {\r\n              current: pi$,\r\n              pageSize: ps$,\r\n              total: total$,\r\n              'show-total': showTotal,\r\n            }\r\n          : false\r\n      \"\r\n      :rowKey=\"rowKey\"\r\n      :scroll=\"scroll\"\r\n      :bordered=\"bordered\"\r\n    >\r\n      <a-table-column\r\n        :width=\"column.width\"\r\n        :key=\"column.key\"\r\n        v-for=\"(column, index) in columns$\"\r\n        :customRender=\"column.customRender\"\r\n        :fixed=\"column.fixed || false\"\r\n        :sorter=\"column.sorter?.compare\"\r\n        :ellipsis=\"column.ellipsis\"\r\n      >\r\n        <template #title=\"scope\">\r\n          <div class=\"header\">\r\n            <slot\r\n              :name=\"column.renderTitle\"\r\n              v-if=\"column.renderTitle\"\r\n              :row=\"scope.row\"\r\n              :title=\"column.title\"\r\n            ></slot>\r\n            <template v-else> {{ column.title }} </template>\r\n            <a-dropdown\r\n              v-if=\"column.filter\"\r\n              class=\"filter\"\r\n              :ref=\"setDropdownRef(index)\"\r\n              overlayClassName=\"st-dropdown-filter\"\r\n              v-model:visible=\"column.filter._visible.value\"\r\n              :trigger=\"['click']\"\r\n            >\r\n              <FilterOutlined\r\n                class=\"point\"\r\n                :class=\"{ active: column.filter._default.value }\"\r\n                @click.stop=\"column.filter._visible.value = true\"\r\n              />\r\n              <template #overlay>\r\n                <a-menu>\r\n                  <template v-if=\"column.filter._menus.value.length\">\r\n                    <a-menu-item\r\n                      v-for=\"menu in column.filter._menus.value\"\r\n                      :key=\"menu.value\"\r\n                    >\r\n                      <div class=\"st-filter-menu\">\r\n                        <a-checkbox\r\n                          v-model:checked=\"menu.checked\"\r\n                          @change=\"handleCheckPart(column, index)\"\r\n                          >{{ menu.text }}</a-checkbox\r\n                        >\r\n                      </div>\r\n                    </a-menu-item>\r\n                    <a-menu-item class=\"footer\" divided>\r\n                      <div class=\"st-filter-menu fx-jb fx-ac\">\r\n                        <a-checkbox\r\n                          :indeterminate=\"column.filter.indeterminate.value\"\r\n                          v-model:checked=\"column.filter.checkAll.value\"\r\n                          @change=\"handleCheckAll($event, column, index)\"\r\n                          >全选</a-checkbox\r\n                        >\r\n                        <a-button\r\n                          size=\"small\"\r\n                          type=\"primary\"\r\n                          @click=\"filterConfirm(column, index)\"\r\n                          >{{ column.filter.confirmText }}</a-button\r\n                        >\r\n                      </div>\r\n                    </a-menu-item>\r\n                  </template>\r\n                  <template v-else>\r\n                    <a-menu-item>\r\n                      <div class=\"st-filter-menu\">\r\n                        加载中<LoadingOutlined />\r\n                      </div>\r\n                    </a-menu-item>\r\n                  </template>\r\n                </a-menu>\r\n              </template>\r\n            </a-dropdown>\r\n          </div>\r\n        </template>\r\n        <template #default=\"{ record }\">\r\n          <slot\r\n            :name=\"column.render\"\r\n            v-if=\"column.render\"\r\n            :row=\"record\"\r\n            :value=\"record._values[index]\"\r\n          ></slot>\r\n          <template v-else>\r\n            <template v-if=\"record._values[index].text\">\r\n              <a-tag\r\n                v-if=\"column.type === 'tag'\"\r\n                :color=\"record._values[index].color\"\r\n                >{{ record._values[index].text }}</a-tag\r\n              >\r\n              <a\r\n                @click.stop.prevent=\"click(record, column)\"\r\n                v-else-if=\"column.type === 'link'\"\r\n              >\r\n                {{ record._values[index].text }}\r\n              </a>\r\n              <span\r\n                v-else\r\n                :title=\"column.ellipsis ? record._values[index].text : ''\"\r\n                >{{ record._values[index].text }}</span\r\n              >\r\n            </template>\r\n            <span\r\n              v-for=\"btn in validBtns(column.buttons, record, column)\"\r\n              :key=\"btn.text\"\r\n              class=\"mr-md btn\"\r\n            >\r\n              <a-dropdown v-if=\"btn.children.length > 0\">\r\n                <span class=\"icon-xs\">\r\n                  <a>\r\n                    <span v-html=\"btnText(record._values, btn)\"></span>\r\n                    <DownOutlined />\r\n                  </a>\r\n                </span>\r\n                <template #overlay>\r\n                  <a-menu>\r\n                    <a-menu-item\r\n                      v-for=\"subBtn in validBtns(btn.children, record, column)\"\r\n                      :key=\"subBtn.text\"\r\n                      @click=\"btnClick(record, subBtn)\"\r\n                    >\r\n                      <span v-html=\"btnText(record._values, subBtn)\"></span>\r\n                      <component :is=\"subBtn.icon\" />\r\n                    </a-menu-item>\r\n                  </a-menu>\r\n                </template>\r\n              </a-dropdown>\r\n              <template v-else>\r\n                <a-popconfirm\r\n                  v-if=\"btn.type === 'popconfirm'\"\r\n                  :title=\"btn.popconfirm.title\"\r\n                  @confirm=\"btn.popconfirm.confirm(record)\"\r\n                >\r\n                  <a>\r\n                    <span v-html=\"btnText(record._values, btn)\"></span>\r\n                    <component :is=\"btn.icon\" />\r\n                  </a>\r\n                </a-popconfirm>\r\n                <template v-else>\r\n                  <a @click=\"btnClick(record, btn)\">\r\n                    <span v-html=\"btnText(record._values, btn)\"></span>\r\n                    <component :is=\"btn.icon\" />\r\n                  </a>\r\n                </template>\r\n              </template>\r\n            </span>\r\n          </template>\r\n        </template>\r\n      </a-table-column>\r\n      <template #expandedRowRender=\"{ record }\" v-if=\"$slots.expandedRowRender\">\r\n        <slot :record=\"record\" name=\"expandedRowRender\"></slot>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { useRefs } from \"@blazes/utils\";\r\nimport { deepMerge } from \"@blazes/utils\";\r\nimport {\r\n  computed,\r\n  defineComponent,\r\n  onMounted,\r\n  Ref,\r\n  ref,\r\n  toRefs,\r\n  watch,\r\n} from \"vue\";\r\nimport STColumnSource from \"./column-source\";\r\nimport STDataSource from \"./data-source\";\r\nimport {\r\n  DEFAULT_ST_PAGE,\r\n  DEFAULT_ST_REQ,\r\n  DEFAULT_ST_RES,\r\n  IChangeSort,\r\n  ISTColumn,\r\n  ISTColumnButton,\r\n  ISTColumnsSort,\r\n  ISTData,\r\n  ISTLoadOptions,\r\n  ISTResetColumnsOption,\r\n} from \"./type\";\r\nimport LoadingOutlined from \"@ant-design/icons-vue/LoadingOutlined\";\r\nimport DownOutlined from \"@ant-design/icons-vue/DownOutlined\";\r\nimport EditOutlined from \"@ant-design/icons-vue/EditOutlined\";\r\nimport DeleteOutlined from \"@ant-design/icons-vue/DeleteOutlined\";\r\nimport FilterOutlined from \"@ant-design/icons-vue/FilterOutlined\";\r\nimport message from \"ant-design-vue/lib/message\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default defineComponent({\r\n  name: \"st\",\r\n  props: {\r\n    columns: Array,\r\n    pageVo: Object,\r\n    data: [String, Array, Object],\r\n    pi: Number,\r\n    ps: Number,\r\n    total: Number,\r\n    res: Object,\r\n    req: Object,\r\n    page: Object,\r\n    rowKey: String,\r\n    scroll: Object,\r\n    pagination: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    bordered: Boolean,\r\n  },\r\n  components: {\r\n    LoadingOutlined,\r\n    DownOutlined,\r\n    EditOutlined,\r\n    DeleteOutlined,\r\n    FilterOutlined,\r\n  },\r\n  setup(props) {\r\n    // 依赖\r\n    const columnSource = new STColumnSource();\r\n    const dataSource = new STDataSource();\r\n    // 变量\r\n    const loading = ref(false);\r\n    const columns$: Ref<ISTColumn[]> = ref([]);\r\n    const _req = computed(() => deepMerge(props.req || {}, DEFAULT_ST_REQ));\r\n    const _res = computed(() => deepMerge(props.res || {}, DEFAULT_ST_RES));\r\n    const _page = computed(() => deepMerge(props.res || {}, DEFAULT_ST_PAGE));\r\n    const pi$ = ref(props.pi || 1);\r\n    const ps$ = ref(props.ps || 10);\r\n    const total$ = ref(props.total || 0);\r\n    const isPagination: Ref<boolean> = ref(props.pagination);\r\n    const data$: Ref<ISTData[]> = ref([]);\r\n    const [dropdownRefs, setDropdownRef] = useRefs<any>();\r\n    const router = useRouter(); // works\r\n    // 方法\r\n    const loadPageData = (first = false) => {\r\n      loading.value = true;\r\n      dataSource\r\n        .process({\r\n          pi: pi$.value,\r\n          ps: ps$.value,\r\n          total: total$.value,\r\n          data: props.data as any,\r\n          req: _req.value,\r\n          res: _res.value,\r\n          page: _page.value,\r\n          paginator: true,\r\n          columns: columns$.value,\r\n          first,\r\n        })\r\n        .then((result) => {\r\n          loading.value = false;\r\n          if (typeof result.pi !== \"undefined\") {\r\n            pi$.value = result.pi;\r\n          }\r\n          if (typeof result.ps !== \"undefined\") {\r\n            ps$.value = result.ps;\r\n          }\r\n          if (typeof result.total !== \"undefined\") {\r\n            total$.value = result.total;\r\n          }\r\n          if (typeof result.pageShow !== \"undefined\" && props.pagination) {\r\n            isPagination.value = result.pageShow;\r\n          }\r\n          data$.value = result.list;\r\n        })\r\n        .catch((msg) => {\r\n          message.error(`加载列表失败：${msg}`);\r\n        });\r\n    };\r\n    const load = (pi: number, extraParams?: {}, options?: ISTLoadOptions) => {\r\n      pi$.value = pi;\r\n      if (typeof extraParams !== \"undefined\") {\r\n        _req.value.params =\r\n          options && options.merge\r\n            ? { ..._req.value.params, ...extraParams }\r\n            : extraParams;\r\n      }\r\n      loadPageData();\r\n    };\r\n    const reload = (extraParams?: {}, options?: ISTLoadOptions) => {\r\n      load(1, extraParams, options);\r\n    };\r\n    const reloadCurrent = () => {\r\n      load(pi$.value);\r\n    };\r\n    const refreshColumns = (columns: ISTColumn[]) => {\r\n      columns$.value = columnSource.process(columns);\r\n    };\r\n    const resetColumns = (options: ISTResetColumnsOption) => {\r\n      options = { emitReload: true, preClearData: false, ...options };\r\n      if (typeof options.pi !== \"undefined\") {\r\n        pi$.value = options.pi;\r\n      }\r\n      if (typeof options.ps !== \"undefined\") {\r\n        ps$.value = options.ps;\r\n      }\r\n      if (options.emitReload) {\r\n        options.preClearData = true;\r\n      }\r\n      if (options.preClearData) {\r\n        data$.value = [];\r\n      }\r\n      refreshColumns((options.columns || props.columns) as ISTColumn[]);\r\n      if (options.emitReload) {\r\n        loadPageData();\r\n      }\r\n    };\r\n    const btnText = (record: ISTData, btn: ISTColumnButton): string => {\r\n      return typeof btn.text === \"function\"\r\n        ? btn.text(record, btn)\r\n        : btn.text || \"\";\r\n    };\r\n    const validBtns = (\r\n      btns: ISTColumnButton[],\r\n      item: ISTData,\r\n      col: ISTColumn\r\n    ): ISTColumnButton[] => {\r\n      return btns.filter((btn) => {\r\n        const result = btn.iif!(item, col);\r\n        const isRenderDisabled = btn.iifBehavior === \"disabled\";\r\n        btn._result = result;\r\n        btn._disabled = !result && isRenderDisabled;\r\n        return result || isRenderDisabled;\r\n      });\r\n    };\r\n    const btnClick = (item: ISTData, btn: ISTColumnButton) => {\r\n      if (!btn.click) {\r\n        return;\r\n      }\r\n      const result = btn.click(item);\r\n      if (result === \"reload\") {\r\n        reload();\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      refreshColumns(props.columns as ISTColumn[]);\r\n      if (props.data) {\r\n        loadPageData(true);\r\n      }\r\n    });\r\n    const handleFilter = (col: ISTColumn, index: number) => {\r\n      col.filter!._visible!.value = false;\r\n      // 过滤表示一种数据的变化应重置页码为 `1`\r\n      pi$.value = 1;\r\n      columnSource.updateDefault(col.filter!);\r\n      columnSource.updateIndeterminate(col.filter!);\r\n      loadPageData();\r\n    };\r\n    const handleCheckPart = (col: ISTColumn, index: number) => {\r\n      columnSource.updateIndeterminate(col.filter!);\r\n    };\r\n    const handleCheckAll = (\r\n      event: { target: { checked: boolean } },\r\n      col: ISTColumn,\r\n      index: number\r\n    ) => {\r\n      columnSource.checkAllFilter(event.target.checked, col);\r\n      columnSource.updateIndeterminate(col.filter!);\r\n    };\r\n    const filterConfirm = (col: ISTColumn, index: number) => {\r\n      handleFilter(col, index);\r\n    };\r\n    // 监听变化\r\n    const { data } = toRefs(props);\r\n    watch(data as Ref<any>, () => {\r\n      loadPageData();\r\n    });\r\n    const click = (item: ISTData, col: ISTColumn) => {\r\n      const res = col.click!(item);\r\n      if (typeof res === \"string\") {\r\n        router.push(res);\r\n      }\r\n    };\r\n\r\n    const changeTable = (\r\n      event: { current?: number },\r\n      _: any,\r\n      sort: IChangeSort\r\n    ) => {\r\n      if (event.current != null) {\r\n        load(event.current);\r\n      }\r\n      if (sort) {\r\n        const { order, column } = sort;\r\n        columns$.value.forEach((c) => {\r\n          c.sorter = {\r\n            ...c.sorter,\r\n            default: c.key === column?.key ? order : undefined,\r\n          } as ISTColumnsSort;\r\n        });\r\n      }\r\n    };\r\n\r\n    const showTotal = (total: number) => `共${total}条`;\r\n\r\n    return {\r\n      loading,\r\n      columns$,\r\n      data$,\r\n      isPagination,\r\n      total$,\r\n      pi$,\r\n      ps$,\r\n      btnText,\r\n      validBtns,\r\n      btnClick,\r\n      load,\r\n      reload,\r\n      handleCheckAll,\r\n      filterConfirm,\r\n      setDropdownRef,\r\n      resetColumns,\r\n      click,\r\n      handleCheckPart,\r\n      changeTable,\r\n      showTotal,\r\n      reloadCurrent,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.st {\r\n  .ant-table {\r\n    width: 100%;\r\n    .header {\r\n      .filter {\r\n        position: static;\r\n        height: 16px;\r\n        :deep(svg) {\r\n          position: static;\r\n          margin: 0;\r\n        }\r\n        &.active {\r\n          color: #1890ff;\r\n        }\r\n        &:focus {\r\n          outline: none;\r\n        }\r\n      }\r\n    }\r\n    .btn:not(:last-child) {\r\n      position: relative;\r\n      &::after {\r\n        content: \" \";\r\n        height: 1em;\r\n        position: absolute;\r\n        right: -8px;\r\n        top: 4px;\r\n        border-right: 1px solid #dcdfe6;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.st-dropdown-filter {\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  .st-filter-menu {\r\n    min-width: 120px;\r\n  }\r\n  .footer {\r\n    position: sticky;\r\n    bottom: 0;\r\n    margin-top: 0;\r\n    background: #fff;\r\n    z-index: 10;\r\n    cursor: auto;\r\n    font-size: 14px;\r\n    &:hover {\r\n      background: #fff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { UnwrapRef } from \"vue\";\r\n\r\nexport interface ISTData {\r\n  checked?: boolean;\r\n  disabled?: boolean;\r\n  expand?: boolean;\r\n  showExpand?: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ISTColumnTagValue {\r\n  color: string;\r\n  text: string;\r\n}\r\n\r\nexport interface ISTColumnTag {\r\n  [key: number]: ISTColumnTagValue;\r\n  [key: string]: ISTColumnTagValue;\r\n}\r\n\r\nexport interface ISTColumnFilterMenu {\r\n  text: string;\r\n  value: any;\r\n  checked?: boolean;\r\n}\r\n\r\nexport interface ISTColumnFilter {\r\n  menus: ISTColumnFilterMenu[] | (() => Promise<ISTColumnFilterMenu[]>);\r\n  confirmText?: string;\r\n  clearText?: string;\r\n  key?: string;\r\n  reName?: (list: ISTColumnFilterMenu[], col: ISTColumn) => Record<string, any>;\r\n  _default?: any;\r\n  _menus?: { value: ISTColumnFilterMenu[] };\r\n  indeterminate?: UnwrapRef<{ value: boolean }>;\r\n  checkAll?: UnwrapRef<{ value: boolean }>;\r\n  _visible?: UnwrapRef<{ value: boolean }>;\r\n  fn?: (filter: ISTColumnFilterMenu, record: ISTData) => boolean; // 本地筛选函数\r\n}\r\n\r\nexport type Sort = \"descend\" | \"ascend\";\r\n\r\nexport interface ISTColumnsSort {\r\n  default?: Sort | undefined;\r\n  compare: ((o1: ISTData, o2: ISTData, order: Sort) => number) | true;\r\n  reName?: (col: ISTColumn, sort: Sort) => Record<string, any>;\r\n}\r\n\r\nexport interface ISTColumn {\r\n  title?: string;\r\n  renderTitle?: string | ((column: ISTColumn, index: number) => void);\r\n  index?: string | string[] | null | undefined;\r\n  render?: string;\r\n  default?: string;\r\n  width?: string;\r\n  format?: (\r\n    data: ISTData,\r\n    column: ISTColumn,\r\n    index: number,\r\n    realIndex: number\r\n  ) => string;\r\n  iif?: (column: ISTColumn) => boolean;\r\n  noIndex?: number;\r\n  indexKey?: string;\r\n  fixed?: \"left\" | \"right\"; // 用来固定列\r\n  buttons?: ISTColumnButton[];\r\n  type?: \"tag\" | \"link\";\r\n  tag?: ISTColumnTag;\r\n  filter?: ISTColumnFilter | null;\r\n  click?: (data: ISTData) => any;\r\n  customRender?: (params: {\r\n    text: string;\r\n    record: ISTData;\r\n    index: number;\r\n  }) => Record<string, any>;\r\n  sorter?: ISTColumnsSort | null;\r\n  ellipsis?: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ISTReqReNameType {\r\n  pi?: string;\r\n  ps?: string;\r\n}\r\n\r\nexport interface ISTResReNameType {\r\n  total?: string;\r\n  list?: string;\r\n}\r\n\r\nexport interface ISTRes {\r\n  reName?: ISTResReNameType; // 重命名total和list\r\n  process?: (data: ISTData[], rawData?: any) => ISTData[]; // rawData全部原始数据\r\n}\r\n\r\nexport interface ISTPage {\r\n  front?: boolean; //  前端分页\r\n  position?: \"top\" | \"bottom\" | \"both\";\r\n  show?: boolean;\r\n  showSize?: boolean;\r\n  pageSizes?: number[];\r\n  showQuickJumper?: boolean;\r\n  indexReset?: boolean;\r\n  toTop?: boolean; // 滚动到顶部\r\n  toTopOffset?: number; // 滚动的偏移距离\r\n}\r\n\r\nexport interface ISTReq {\r\n  params?: any; // 除了pi和ps附加到req\r\n  headers?: any;\r\n  reName?: ISTReqReNameType; // 重命名pi和ps\r\n  firstParams?: any; // 只在第一次传入的参数\r\n}\r\n\r\nexport interface ISTDataSourceOption {\r\n  pi: number;\r\n  ps: number;\r\n  paginator: boolean; // 后端查询是否分页\r\n  data: string | Promise<ISTData[]> | ISTData[];\r\n  total: number;\r\n  columns: ISTColumn[];\r\n  req: ISTReq;\r\n  res: ISTRes;\r\n  page: ISTPage;\r\n  first: boolean;\r\n}\r\n\r\nexport interface ISTDataSourceResult {\r\n  /** 是否需要显示分页器 */\r\n  pageShow: boolean;\r\n  /** 新 `pi`，若返回 `undefined` 表示用户受控 */\r\n  pi: number;\r\n  /** 新 `ps`，若返回 `undefined` 表示用户受控 */\r\n  ps: number;\r\n  /** 新 `total`，若返回 `undefined` 表示用户受控 */\r\n  total: number;\r\n  list: ISTData[];\r\n}\r\n\r\nexport interface ISTColumnButton {\r\n  text?: string | ((record: ISTData, btn: ISTColumnButton) => string);\r\n  icon?: string;\r\n  click?: (record: ISTData) => void | \"reload\";\r\n  children?: ISTColumnButton[]; // 更多的下拉菜单\r\n  iif?: (record: ISTData, column: ISTColumn) => boolean;\r\n  iifBehavior?: \"hide\" | \"disabled\"; // iif返回false时候的表现\r\n  type?: \"popconfirm\";\r\n  popconfirm?: ISTColumnPopConfirm;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ISTColumnPopConfirm {\r\n  title: string;\r\n  confirm: (record: ISTData) => void;\r\n}\r\n\r\nexport interface ISTResetColumnsOption {\r\n  pi?: number;\r\n  ps?: number;\r\n  columns?: ISTColumn[];\r\n  preClearData?: boolean;\r\n  emitReload?: boolean;\r\n}\r\n\r\nexport interface ISTLoadOptions {\r\n  merge: boolean; //是否合并\r\n}\r\n\r\nexport const COLUMN_DEFAULT = \"-\";\r\nexport const NO_INDEX = 1;\r\n\r\nexport const DEFAULT_ST_RES: ISTRes = {\r\n  reName: { total: \"total\", list: \"items\" },\r\n};\r\nexport const DEFAULT_ST_REQ: ISTReq = {\r\n  reName: { pi: \"offset\", ps: \"limit\" },\r\n};\r\nexport const DEFAULT_ST_PAGE: ISTPage = {\r\n  front: true,\r\n  position: \"bottom\",\r\n  show: true,\r\n  showSize: false,\r\n  pageSizes: [10, 20, 30, 40, 50],\r\n  showQuickJumper: false,\r\n  indexReset: true,\r\n  toTop: true,\r\n  toTopOffset: 100,\r\n};\r\nexport const DEFAULT_IIF_BEHAIVOR = \"hide\";\r\nexport const DEFAULT_FILTER = {\r\n  filterConfirmText: \"确定\",\r\n  filterClearText: \"重置\",\r\n};\r\n\r\nexport interface IChangeSort {\r\n  column?: ISTColumn;\r\n  columnKey: string;\r\n  order?: Sort | undefined;\r\n}","import {\r\n  DEFAULT_FILTER,\r\n  DEFAULT_IIF_BEHAIVOR,\r\n  ISTColumn,\r\n  ISTColumnButton,\r\n  ISTColumnFilter,\r\n  ISTColumnFilterMenu\r\n} from \"./type\";\r\nimport { ArrayService, deepCopy } from \"@blazes/utils\";\r\nimport { reactive } from \"vue\";\r\n\r\nexport default class STColumnSource {\r\n  lastColumns: ISTColumn[] = [];\r\n\r\n  process(list: ISTColumn[]): ISTColumn[] {\r\n    this.lastColumns = list;\r\n    if (ArrayService.arrIsEmpty(list)) {\r\n      throw new Error(`[st]: the columns property muse be define!`);\r\n    }\r\n    const columns: ISTColumn[] = [];\r\n    const copyColumens = deepCopy(list) as ISTColumn[];\r\n    for (const item of copyColumens) {\r\n      if (item.iif && item.iif(item)) {\r\n        continue;\r\n      }\r\n      if (item.index) {\r\n        if (!Array.isArray(item.index)) {\r\n          item.index = item.index.split(\".\");\r\n        }\r\n        item.indexKey = item.index.join(\".\");\r\n      }\r\n      item.buttons = this.fixButtons(item.buttons!);\r\n      item.width = item.width || \"auto\";\r\n      item.default = item.default || \"\";\r\n      item.filter = this.filterCoerce(item);\r\n      item.key =\r\n        item.key ||\r\n        `${item.index}` + `${item.render}` + item.title + item.renderTitle;\r\n      columns.push(item);\r\n    }\r\n\r\n    this.fixedCoerce(columns);\r\n\r\n    return columns;\r\n  }\r\n\r\n  private filterCoerce(item: ISTColumn): ISTColumnFilter | null {\r\n    if (item.filter == null) {\r\n      return null;\r\n    }\r\n    const res: ISTColumnFilter = item.filter;\r\n    if (!res?.menus && ArrayService.arrIsEmpty(res?.menus as ISTColumnFilterMenu[])) {\r\n      return null;\r\n    }\r\n\r\n    res._menus = reactive({ value: [] });\r\n    const menus = (Array.isArray(res.menus)\r\n      ? () => Promise.resolve(res.menus)\r\n      : res.menus) as () => Promise<ISTColumnFilterMenu[]>;\r\n    menus().then((resp: ISTColumnFilterMenu[]) => {\r\n      res._menus!.value = resp;\r\n    });\r\n    res.confirmText = res.confirmText || DEFAULT_FILTER.filterConfirmText;\r\n    res.clearText = res.clearText || DEFAULT_FILTER.filterClearText;\r\n    res.key = res.key || item.indexKey;\r\n    res._default = reactive({ value: false });\r\n    res.indeterminate = reactive({ value: false });\r\n    res.checkAll = reactive({ value: false });\r\n    res._visible = reactive({ value: false });\r\n\r\n    return res;\r\n  }\r\n\r\n  private fixedCoerce(list: ISTColumn[]) {\r\n    const countReduce = (a: number, b: ISTColumn) =>\r\n      a + +b.width!.toString().replace(\"px\", \"\");\r\n    // left width\r\n    list\r\n      .filter(w => w.fixed && w.fixed === \"left\" && w.width)\r\n      .forEach(\r\n        (item, idx) =>\r\n          (item._left = list.slice(0, idx).reduce(countReduce, 0) + \"px\")\r\n      );\r\n    // right width\r\n    list\r\n      .filter(w => w.fixed && w.fixed === \"right\" && w.width)\r\n      .reverse()\r\n      .forEach(\r\n        (item, idx) =>\r\n          (item._right =\r\n            (idx > 0 ? list.slice(-idx).reduce(countReduce, 0) : 0) + \"px\")\r\n      );\r\n  }\r\n\r\n  private fixButtons(list: ISTColumnButton[]) {\r\n    if (!list) {\r\n      return [];\r\n    }\r\n    const ret: ISTColumnButton[] = [];\r\n    for (const item of list) {\r\n      item.children = ArrayService.arrIsEmpty(item.children as any)\r\n        ? []\r\n        : this.fixButtons(item.children as any);\r\n      ret.push(item);\r\n    }\r\n    this.btnCoerceIf(ret);\r\n\r\n    return ret;\r\n  }\r\n\r\n  private btnCoerceIf(list: ISTColumnButton[]): void {\r\n    for (const item of list) {\r\n      if (!item.iif) item.iif = () => true;\r\n      item.iifBehavior = item.iifBehavior || DEFAULT_IIF_BEHAIVOR;\r\n      if (item.children && item.children.length > 0) {\r\n        this.btnCoerceIf(item.children);\r\n      } else {\r\n        item.children = [];\r\n      }\r\n    }\r\n  }\r\n\r\n  cleanFilter(col: ISTColumn) {\r\n    const f = col.filter!;\r\n    f._menus!.value.forEach(i => (i.checked = false));\r\n  }\r\n\r\n  checkAllFilter(checked: boolean, col: ISTColumn) {\r\n    const f = col.filter!;\r\n    f._menus!.value.forEach(i => (i.checked = checked));\r\n  }\r\n\r\n  updateDefault(filter: ISTColumnFilter) {\r\n    (filter._default as any).value =\r\n      filter._menus!.value.findIndex(w => w.checked!) !== -1;\r\n  }\r\n\r\n  updateIndeterminate(filter: ISTColumnFilter) {\r\n    const menus = filter._menus!;\r\n    const checkedCount = menus.value.filter(w => w.checked).length;\r\n    filter.indeterminate!.value =\r\n      checkedCount > 0 && checkedCount !== menus.value.length;\r\n    filter.checkAll!.value = checkedCount === menus.value.length;\r\n  }\r\n}\r\n","import { instance } from \"@blazes/theme\";\r\nimport { deepCopy, deepGet } from \"@blazes/utils\";\r\nimport {\r\n  ISTColumn,\r\n  ISTColumnFilter,\r\n  ISTColumnFilterMenu,\r\n  ISTData,\r\n  ISTDataSourceOption,\r\n  ISTDataSourceResult,\r\n} from \"./type\";\r\n\r\nexport default class STDataSource {\r\n  process(options: ISTDataSourceOption): Promise<ISTDataSourceResult> {\r\n    return new Promise((resolve, reject) => {\r\n      const { data, res, paginator, page, ps, pi, columns, total } = options;\r\n      let data$: Promise<ISTData[]>;\r\n      let retTotal: number;\r\n      let retPs: number;\r\n      let retPi: number;\r\n      let remote = false;\r\n      let rawData: any;\r\n      let showPage = page.show;\r\n\r\n      if (typeof data === \"string\") {\r\n        remote = true;\r\n        data$ = this.getByHttp(data, options)\r\n          .then((result) => {\r\n            rawData = result;\r\n            let ret: ISTData[];\r\n            if (Array.isArray(result)) {\r\n              ret = result;\r\n              retTotal = ret.length;\r\n              retPs = retTotal;\r\n              showPage = false;\r\n            } else {\r\n              ret = deepGet(result, res?.reName?.list, []);\r\n\r\n              if (!Array.isArray(ret)) {\r\n                ret = [];\r\n              }\r\n              retTotal = +deepGet(result, res?.reName?.total, []) || 0;\r\n            }\r\n\r\n            return deepCopy(ret);\r\n          })\r\n          .catch((err) => {\r\n            reject(err);\r\n            return [];\r\n          });\r\n      } else if (Array.isArray(data)) {\r\n        data$ = Promise.resolve(data);\r\n      } else {\r\n        data$ = data;\r\n      }\r\n\r\n      if (!remote) {\r\n        data$ = data$\r\n          .then((result) => {\r\n            columns\r\n              .filter((w) => w.filter)\r\n              .forEach((c) => {\r\n                const filter = c.filter!;\r\n                const values = this.getFilteredData(filter);\r\n                if (values.length === 0) return;\r\n                const onFilter = filter.fn;\r\n                if (typeof onFilter !== \"function\") {\r\n                  console.warn(`[st] Muse provide the fn function in filter`);\r\n                  return;\r\n                }\r\n                result = result.filter((record) =>\r\n                  values.some((v) => onFilter(v, record))\r\n                );\r\n              });\r\n            return result;\r\n          })\r\n          .then((result) => {\r\n            rawData = result;\r\n\r\n            if (paginator && page.front) {\r\n              const maxPageIndex = Math.ceil(result.length / ps);\r\n              retPi = Math.max(1, pi > maxPageIndex ? maxPageIndex : pi);\r\n              retTotal = result.length;\r\n              if (page.show) {\r\n                return result.slice((retPi - 1) * ps, retPi * ps);\r\n              }\r\n            }\r\n\r\n            return result;\r\n          });\r\n      }\r\n\r\n      if (typeof res.process === \"function\") {\r\n        data$ = data$.then((result) => res.process!(result, rawData));\r\n      }\r\n\r\n      data$ = data$.then((result) => {\r\n        const resultOffset = ((retPi || pi) - 1) * (retPs || ps);\r\n        for (let i = 0, len = result.length; i < len; i++) {\r\n          const realIndex = resultOffset + i + 1;\r\n          result[i]._values = columns.map((column, index) =>\r\n            this.get(result[i], column, index, realIndex)\r\n          );\r\n        }\r\n\r\n        return result;\r\n      });\r\n\r\n      data$.then((result) => {\r\n        const realTotal = retTotal || total;\r\n        const realPs = retPs || ps;\r\n        resolve({\r\n          pi: retPi,\r\n          ps: retPs,\r\n          total: retTotal,\r\n          list: result,\r\n          pageShow:\r\n            typeof showPage === \"undefined\" ? realTotal > realPs : showPage,\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  private get(\r\n    item: ISTData,\r\n    column: ISTColumn,\r\n    index: number,\r\n    realIndex: number\r\n  ): { text: any; org: any; color?: string } {\r\n    if (column.format) {\r\n      const formatRes = column.format(item, column, index, realIndex);\r\n      return { text: formatRes || \"\", org: formatRes };\r\n    }\r\n\r\n    const value = deepGet(item, column.index, column.default);\r\n    let text = value;\r\n    let color: string | undefined;\r\n    switch (column.type) {\r\n      case \"tag\": {\r\n        const data = column.tag;\r\n        if (data && data[text]) {\r\n          const dataItem = data[text];\r\n          text = dataItem.text;\r\n          color = dataItem.color;\r\n        } else {\r\n          text = \"\";\r\n        }\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return { text: text != null ? text : \"\", org: value, color };\r\n  }\r\n\r\n  private getByHttp(url: string, options: ISTDataSourceOption): Promise<any> {\r\n    const { req, paginator, pi, ps, columns, first } = options;\r\n    let params = {};\r\n    const reName = req.reName;\r\n    if (paginator) {\r\n      params = {\r\n        [reName?.pi as string]: pi,\r\n        [reName?.ps as string]: ps,\r\n      };\r\n    }\r\n\r\n    params = {\r\n      ...params,\r\n      ...req.params,\r\n      ...this.getReqFilterMap(columns),\r\n      ...this.getReqSortMap(columns),\r\n      ...(first && req.firstParams ? req.firstParams : {}),\r\n    };\r\n\r\n    return instance.get(url, { params, headers: req.headers });\r\n  }\r\n\r\n  private getFilteredData(filter: ISTColumnFilter): ISTColumnFilterMenu[] {\r\n    return filter._menus!.value.filter((f) => f.checked === true);\r\n  }\r\n\r\n  private getReqFilterMap(columns: ISTColumn[]): { [key: string]: string } {\r\n    let ret = {};\r\n    columns\r\n      .filter((w) => w.filter)\r\n      .forEach((col) => {\r\n        const filter = col.filter!;\r\n        const values = this.getFilteredData(filter);\r\n        let obj: { [key: string]: any } = {};\r\n        if (filter.reName) {\r\n          obj = filter.reName!(filter._menus!.value, col);\r\n        } else {\r\n          obj[filter.key!] = values.map((i) => i.value).join(\",\");\r\n        }\r\n        ret = { ...ret, ...obj };\r\n      });\r\n    return ret;\r\n  }\r\n\r\n  private getReqSortMap(columns: ISTColumn[]): { [key: string]: string } {\r\n    let ret = {};\r\n    columns\r\n      .filter((w) => w.sorter?.compare === true && w.sorter?.default)\r\n      .forEach((col) => {\r\n        let obj: { [key: string]: any } = {};\r\n        if (col.sorter?.reName) {\r\n          obj = col.sorter.reName!(col, col.sorter.default!);\r\n        } else {\r\n          obj[col.index as string] = col.sorter?.default;\r\n        }\r\n        ret = { ...ret, ...obj };\r\n      });\r\n    return ret;\r\n  }\r\n}\r\n","\r\nimport { useRefs } from \"@blazes/utils\";\r\nimport { deepMerge } from \"@blazes/utils\";\r\nimport {\r\n  computed,\r\n  defineComponent,\r\n  onMounted,\r\n  Ref,\r\n  ref,\r\n  toRefs,\r\n  watch,\r\n} from \"vue\";\r\nimport STColumnSource from \"./column-source\";\r\nimport STDataSource from \"./data-source\";\r\nimport {\r\n  DEFAULT_ST_PAGE,\r\n  DEFAULT_ST_REQ,\r\n  DEFAULT_ST_RES,\r\n  IChangeSort,\r\n  ISTColumn,\r\n  ISTColumnButton,\r\n  ISTColumnsSort,\r\n  ISTData,\r\n  ISTLoadOptions,\r\n  ISTResetColumnsOption,\r\n} from \"./type\";\r\nimport LoadingOutlined from \"@ant-design/icons-vue/LoadingOutlined\";\r\nimport DownOutlined from \"@ant-design/icons-vue/DownOutlined\";\r\nimport EditOutlined from \"@ant-design/icons-vue/EditOutlined\";\r\nimport DeleteOutlined from \"@ant-design/icons-vue/DeleteOutlined\";\r\nimport FilterOutlined from \"@ant-design/icons-vue/FilterOutlined\";\r\nimport message from \"ant-design-vue/lib/message\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default defineComponent({\r\n  name: \"st\",\r\n  props: {\r\n    columns: Array,\r\n    pageVo: Object,\r\n    data: [String, Array, Object],\r\n    pi: Number,\r\n    ps: Number,\r\n    total: Number,\r\n    res: Object,\r\n    req: Object,\r\n    page: Object,\r\n    rowKey: String,\r\n    scroll: Object,\r\n    pagination: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    bordered: Boolean,\r\n  },\r\n  components: {\r\n    LoadingOutlined,\r\n    DownOutlined,\r\n    EditOutlined,\r\n    DeleteOutlined,\r\n    FilterOutlined,\r\n  },\r\n  setup(props) {\r\n    // 依赖\r\n    const columnSource = new STColumnSource();\r\n    const dataSource = new STDataSource();\r\n    // 变量\r\n    const loading = ref(false);\r\n    const columns$: Ref<ISTColumn[]> = ref([]);\r\n    const _req = computed(() => deepMerge(props.req || {}, DEFAULT_ST_REQ));\r\n    const _res = computed(() => deepMerge(props.res || {}, DEFAULT_ST_RES));\r\n    const _page = computed(() => deepMerge(props.res || {}, DEFAULT_ST_PAGE));\r\n    const pi$ = ref(props.pi || 1);\r\n    const ps$ = ref(props.ps || 10);\r\n    const total$ = ref(props.total || 0);\r\n    const isPagination: Ref<boolean> = ref(props.pagination);\r\n    const data$: Ref<ISTData[]> = ref([]);\r\n    const [dropdownRefs, setDropdownRef] = useRefs<any>();\r\n    const router = useRouter(); // works\r\n    // 方法\r\n    const loadPageData = (first = false) => {\r\n      loading.value = true;\r\n      dataSource\r\n        .process({\r\n          pi: pi$.value,\r\n          ps: ps$.value,\r\n          total: total$.value,\r\n          data: props.data as any,\r\n          req: _req.value,\r\n          res: _res.value,\r\n          page: _page.value,\r\n          paginator: true,\r\n          columns: columns$.value,\r\n          first,\r\n        })\r\n        .then((result) => {\r\n          loading.value = false;\r\n          if (typeof result.pi !== \"undefined\") {\r\n            pi$.value = result.pi;\r\n          }\r\n          if (typeof result.ps !== \"undefined\") {\r\n            ps$.value = result.ps;\r\n          }\r\n          if (typeof result.total !== \"undefined\") {\r\n            total$.value = result.total;\r\n          }\r\n          if (typeof result.pageShow !== \"undefined\" && props.pagination) {\r\n            isPagination.value = result.pageShow;\r\n          }\r\n          data$.value = result.list;\r\n        })\r\n        .catch((msg) => {\r\n          message.error(`加载列表失败：${msg}`);\r\n        });\r\n    };\r\n    const load = (pi: number, extraParams?: {}, options?: ISTLoadOptions) => {\r\n      pi$.value = pi;\r\n      if (typeof extraParams !== \"undefined\") {\r\n        _req.value.params =\r\n          options && options.merge\r\n            ? { ..._req.value.params, ...extraParams }\r\n            : extraParams;\r\n      }\r\n      loadPageData();\r\n    };\r\n    const reload = (extraParams?: {}, options?: ISTLoadOptions) => {\r\n      load(1, extraParams, options);\r\n    };\r\n    const reloadCurrent = () => {\r\n      load(pi$.value);\r\n    };\r\n    const refreshColumns = (columns: ISTColumn[]) => {\r\n      columns$.value = columnSource.process(columns);\r\n    };\r\n    const resetColumns = (options: ISTResetColumnsOption) => {\r\n      options = { emitReload: true, preClearData: false, ...options };\r\n      if (typeof options.pi !== \"undefined\") {\r\n        pi$.value = options.pi;\r\n      }\r\n      if (typeof options.ps !== \"undefined\") {\r\n        ps$.value = options.ps;\r\n      }\r\n      if (options.emitReload) {\r\n        options.preClearData = true;\r\n      }\r\n      if (options.preClearData) {\r\n        data$.value = [];\r\n      }\r\n      refreshColumns((options.columns || props.columns) as ISTColumn[]);\r\n      if (options.emitReload) {\r\n        loadPageData();\r\n      }\r\n    };\r\n    const btnText = (record: ISTData, btn: ISTColumnButton): string => {\r\n      return typeof btn.text === \"function\"\r\n        ? btn.text(record, btn)\r\n        : btn.text || \"\";\r\n    };\r\n    const validBtns = (\r\n      btns: ISTColumnButton[],\r\n      item: ISTData,\r\n      col: ISTColumn\r\n    ): ISTColumnButton[] => {\r\n      return btns.filter((btn) => {\r\n        const result = btn.iif!(item, col);\r\n        const isRenderDisabled = btn.iifBehavior === \"disabled\";\r\n        btn._result = result;\r\n        btn._disabled = !result && isRenderDisabled;\r\n        return result || isRenderDisabled;\r\n      });\r\n    };\r\n    const btnClick = (item: ISTData, btn: ISTColumnButton) => {\r\n      if (!btn.click) {\r\n        return;\r\n      }\r\n      const result = btn.click(item);\r\n      if (result === \"reload\") {\r\n        reload();\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      refreshColumns(props.columns as ISTColumn[]);\r\n      if (props.data) {\r\n        loadPageData(true);\r\n      }\r\n    });\r\n    const handleFilter = (col: ISTColumn, index: number) => {\r\n      col.filter!._visible!.value = false;\r\n      // 过滤表示一种数据的变化应重置页码为 `1`\r\n      pi$.value = 1;\r\n      columnSource.updateDefault(col.filter!);\r\n      columnSource.updateIndeterminate(col.filter!);\r\n      loadPageData();\r\n    };\r\n    const handleCheckPart = (col: ISTColumn, index: number) => {\r\n      columnSource.updateIndeterminate(col.filter!);\r\n    };\r\n    const handleCheckAll = (\r\n      event: { target: { checked: boolean } },\r\n      col: ISTColumn,\r\n      index: number\r\n    ) => {\r\n      columnSource.checkAllFilter(event.target.checked, col);\r\n      columnSource.updateIndeterminate(col.filter!);\r\n    };\r\n    const filterConfirm = (col: ISTColumn, index: number) => {\r\n      handleFilter(col, index);\r\n    };\r\n    // 监听变化\r\n    const { data } = toRefs(props);\r\n    watch(data as Ref<any>, () => {\r\n      loadPageData();\r\n    });\r\n    const click = (item: ISTData, col: ISTColumn) => {\r\n      const res = col.click!(item);\r\n      if (typeof res === \"string\") {\r\n        router.push(res);\r\n      }\r\n    };\r\n\r\n    const changeTable = (\r\n      event: { current?: number },\r\n      _: any,\r\n      sort: IChangeSort\r\n    ) => {\r\n      if (event.current != null) {\r\n        load(event.current);\r\n      }\r\n      if (sort) {\r\n        const { order, column } = sort;\r\n        columns$.value.forEach((c) => {\r\n          c.sorter = {\r\n            ...c.sorter,\r\n            default: c.key === column?.key ? order : undefined,\r\n          } as ISTColumnsSort;\r\n        });\r\n      }\r\n    };\r\n\r\n    const showTotal = (total: number) => `共${total}条`;\r\n\r\n    return {\r\n      loading,\r\n      columns$,\r\n      data$,\r\n      isPagination,\r\n      total$,\r\n      pi$,\r\n      ps$,\r\n      btnText,\r\n      validBtns,\r\n      btnClick,\r\n      load,\r\n      reload,\r\n      handleCheckAll,\r\n      filterConfirm,\r\n      setDropdownRef,\r\n      resetColumns,\r\n      click,\r\n      handleCheckPart,\r\n      changeTable,\r\n      showTotal,\r\n      reloadCurrent,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=5801405a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=5801405a&lang=less&scoped=true\"\nimport \"./index.vue?vue&type=style&index=1&id=5801405a&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-5801405a\"\n\nexport default script","import { App } from \"vue\";\r\nimport st from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nst.install = (app: App): void => {\r\n  app.component(st.name, st);\r\n};\r\n\r\nconst _st: SFCWithInstall<typeof st> = st as any;\r\nexport default _st;\r\n","<template>\r\n  <div class=\"page-header\">\r\n    <div class=\"breadcrumb\">\r\n      <template v-if=\"$slots.breadcrumb\">\r\n        <slot name=\"breadcrumb\"></slot>\r\n      </template>\r\n      <a-breadcrumb v-else separator=\"/\">\r\n        <a-breadcrumb-item v-for=\"path in paths\" :key=\"path.text\">\r\n          <router-link v-if=\"path.link\" :to=\"path.link\">\r\n            {{ path.text }}\r\n          </router-link>\r\n          <template v-else>\r\n            {{ path.text }}\r\n          </template>\r\n        </a-breadcrumb-item>\r\n      </a-breadcrumb>\r\n    </div>\r\n    <div class=\"detail fx\">\r\n      <div v-if=\"$slots.logo\" class=\"logo\">\r\n        <slot name=\"logo\"></slot>\r\n      </div>\r\n      <div class=\"main\">\r\n        <div class=\"row\">\r\n          <h1 class=\"title\">\r\n            <template v-if=\"$slots.title\">\r\n              <slot name=\"title\" :title=\"title$\"></slot>\r\n            </template>\r\n            <template v-else>\r\n              {{ title$ }}\r\n            </template>\r\n          </h1>\r\n          <div v-if=\"$slots.action\" class=\"action\">\r\n            <slot name=\"action\"></slot>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"desc\" v-if=\"$slots.default\">\r\n            <slot></slot>\r\n          </div>\r\n          <div v-if=\"$slots.extra\" class=\"extra\">\r\n            <slot name=\"extra\"></slot>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <slot name=\"tab\"></slot>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { ArrayService } from \"@blazes/utils\";\r\nimport { IMenu, menuService } from \"@blazes/theme\";\r\n\r\nexport default defineComponent({\r\n  name: \"page-header\",\r\n  props: {\r\n    title: String,\r\n  },\r\n  setup(props) {\r\n    const route = useRoute();\r\n    const curMatch = ArrayService.getLast(route.matched);\r\n    // 返回的路径最后一个不一定等于url\r\n    const paths = curMatch ? menuService.getPathByUrl(curMatch?.path) : [];\r\n    if (curMatch && ArrayService.getLast(paths)?.link !== curMatch.path) {\r\n      paths.push({\r\n        text: curMatch.name as string,\r\n        link: curMatch.path,\r\n      } as IMenu);\r\n    }\r\n    const title$ = computed(\r\n      () => props.title || ArrayService.getLast(paths)?.text\r\n    );\r\n\r\n    return { paths, title$ };\r\n  },\r\n});\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.page-header {\r\n  padding: 12px 24px 0;\r\n  margin-bottom: 24px;\r\n  margin-left: -24px;\r\n  margin-right: -24px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  background-color: #fff;\r\n  .breadcrumb {\r\n    margin-bottom: 16px;\r\n  }\r\n  .detail {\r\n    .logo {\r\n      margin: 0 16px 16px 0;\r\n      flex: 1 1 auto;\r\n    }\r\n    .main {\r\n      width: 100%;\r\n      flex: 0 1 auto;\r\n      .title {\r\n        margin: 0 0 16px 0;\r\n        flex: auto;\r\n        color: rgba(0, 0, 0, 0.85);\r\n        font-weight: 500;\r\n        font-size: 20px;\r\n      }\r\n      .action {\r\n        margin-bottom: 16px;\r\n        flex: 0 1 auto;\r\n        text-align: right;\r\n      }\r\n      .desc {\r\n        margin-bottom: 16px;\r\n        flex: auto;\r\n      }\r\n      .extra {\r\n        min-width: 240px;\r\n        margin: 0 0 16px 88px;\r\n        flex: 0 1 auto;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n        align-items: flex-end;\r\n      }\r\n    }\r\n  }\r\n  .row {\r\n    display: flex;\r\n    width: 100%;\r\n  }\r\n  :deep(.ant-tabs) {\r\n    margin: 0 0 -16px;\r\n    .ant-tabs__nav-wrap::after {\r\n      background-color: transparent;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport { computed, defineComponent } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { ArrayService } from \"@blazes/utils\";\r\nimport { IMenu, menuService } from \"@blazes/theme\";\r\n\r\nexport default defineComponent({\r\n  name: \"page-header\",\r\n  props: {\r\n    title: String,\r\n  },\r\n  setup(props) {\r\n    const route = useRoute();\r\n    const curMatch = ArrayService.getLast(route.matched);\r\n    // 返回的路径最后一个不一定等于url\r\n    const paths = curMatch ? menuService.getPathByUrl(curMatch?.path) : [];\r\n    if (curMatch && ArrayService.getLast(paths)?.link !== curMatch.path) {\r\n      paths.push({\r\n        text: curMatch.name as string,\r\n        link: curMatch.path,\r\n      } as IMenu);\r\n    }\r\n    const title$ = computed(\r\n      () => props.title || ArrayService.getLast(paths)?.text\r\n    );\r\n\r\n    return { paths, title$ };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=36f8c908&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=36f8c908&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-36f8c908\"\n\nexport default script","import { App } from \"vue\";\r\nimport PageHeader from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nPageHeader.install = (app: App): void => {\r\n  app.component(PageHeader.name, PageHeader);\r\n};\r\n\r\nconst _PageHeader: SFCWithInstall<typeof PageHeader> = PageHeader as any;\r\nexport default _PageHeader;\r\n","\r\nimport { computed, defineComponent } from \"vue\";\r\nimport { IOperate } from \"./type\";\r\nimport DownOutlined from \"@ant-design/icons-vue/DownOutlined\";\r\nimport { ArrayService } from \"@blazes/utils\";\r\n\r\nexport default defineComponent({\r\n  name: \"operates\",\r\n  components: {\r\n    DownOutlined,\r\n  },\r\n  props: {\r\n    operates: Array,\r\n    record: Object,\r\n    type: { type: String, default: \"text\" },\r\n    firstButtonPrimary: { type: Boolean, default: true },\r\n  },\r\n  setup(props) {\r\n    const validOperates = (operates: IOperate[], item: any) => {\r\n      return operates.filter((operate) => {\r\n        const result = operate.iif ? operate.iif(props.record) : true;\r\n        const isRenderDisabled = operate.iifBehavior === \"disabled\";\r\n        operate._result = result;\r\n        operate._disabled = !result && isRenderDisabled;\r\n        operate._children = ArrayService.arrIsEmpty(operate.children)\r\n          ? []\r\n          : validOperates(operate.children!, item);\r\n        operate._text =\r\n          typeof operate.text === \"function\"\r\n            ? operate.text(item, operate)\r\n            : operate.text || \"\";\r\n        operate.type = operate.type || \"default\";\r\n        return result || isRenderDisabled;\r\n      });\r\n    };\r\n\r\n    const operates$ = computed(() => {\r\n      return props.record\r\n        ? validOperates((props.operates as IOperate[]) || [], props.record)\r\n        : [];\r\n    });\r\n\r\n    const operateClick = (btn: IOperate) => {\r\n      if (!btn.click) {\r\n        return;\r\n      }\r\n      const result = btn.click(props.record);\r\n    };\r\n\r\n    return { operates$, operateClick };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=3241a408\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <template v-if=\"type === 'text'\">\r\n    <span v-for=\"btn in operates$\" :key=\"btn.text\" class=\"mr-md btn\">\r\n      <a-dropdown v-if=\"btn._children.length > 0\">\r\n        <span>\r\n          <a> <span v-html=\"btn._text\"></span> <DownOutlined /> </a>\r\n        </span>\r\n        <template #dropdown>\r\n          <a-menu>\r\n            <a-menu-item\r\n              v-for=\"subBtn in btn._children\"\r\n              :key=\"subBtn._text\"\r\n              @click=\"operateClick(subBtn)\"\r\n            >\r\n              <span v-html=\"subBtn._text\"></span>\r\n              <i :class=\"subBtn.icon\"></i>\r\n            </a-menu-item>\r\n          </a-menu>\r\n        </template>\r\n      </a-dropdown>\r\n      <a v-else @click=\"operateClick(btn)\">\r\n        <span v-html=\"btn._text\"></span>\r\n        <i :class=\"btn.icon\"></i>\r\n      </a>\r\n    </span>\r\n  </template>\r\n  <template v-else>\r\n    <a-button-group>\r\n      <template v-for=\"(btn, index) in operates$\" :key=\"btn.text\">\r\n        <a-dropdown v-if=\"btn._children.length > 0\">\r\n          <a-button\r\n            :type=\"firstButtonPrimary && index === 0 ? 'primary' : btn.type\"\r\n            :icon=\"btn.icon\"\r\n            ><span v-html=\"btn._text\"></span\r\n          ></a-button>\r\n          <template #overlay>\r\n            <a-menu>\r\n              <a-menu-item\r\n                v-for=\"subBtn in btn._children\"\r\n                :key=\"subBtn._text\"\r\n                @click=\"operateClick(subBtn)\"\r\n              >\r\n                <span v-html=\"subBtn._text\"></span>\r\n                <i :class=\"subBtn.icon\"></i>\r\n              </a-menu-item>\r\n            </a-menu>\r\n          </template>\r\n        </a-dropdown>\r\n        <a-button\r\n          v-else\r\n          :type=\"firstButtonPrimary && index === 0 ? 'primary' : btn.type\"\r\n          :icon=\"btn.icon\"\r\n          @click=\"operateClick(btn)\"\r\n          ><span v-html=\"btn._text\"></span\r\n        ></a-button>\r\n      </template>\r\n    </a-button-group>\r\n  </template>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { computed, defineComponent } from \"vue\";\r\nimport { IOperate } from \"./type\";\r\nimport DownOutlined from \"@ant-design/icons-vue/DownOutlined\";\r\nimport { ArrayService } from \"@blazes/utils\";\r\n\r\nexport default defineComponent({\r\n  name: \"operates\",\r\n  components: {\r\n    DownOutlined,\r\n  },\r\n  props: {\r\n    operates: Array,\r\n    record: Object,\r\n    type: { type: String, default: \"text\" },\r\n    firstButtonPrimary: { type: Boolean, default: true },\r\n  },\r\n  setup(props) {\r\n    const validOperates = (operates: IOperate[], item: any) => {\r\n      return operates.filter((operate) => {\r\n        const result = operate.iif ? operate.iif(props.record) : true;\r\n        const isRenderDisabled = operate.iifBehavior === \"disabled\";\r\n        operate._result = result;\r\n        operate._disabled = !result && isRenderDisabled;\r\n        operate._children = ArrayService.arrIsEmpty(operate.children)\r\n          ? []\r\n          : validOperates(operate.children!, item);\r\n        operate._text =\r\n          typeof operate.text === \"function\"\r\n            ? operate.text(item, operate)\r\n            : operate.text || \"\";\r\n        operate.type = operate.type || \"default\";\r\n        return result || isRenderDisabled;\r\n      });\r\n    };\r\n\r\n    const operates$ = computed(() => {\r\n      return props.record\r\n        ? validOperates((props.operates as IOperate[]) || [], props.record)\r\n        : [];\r\n    });\r\n\r\n    const operateClick = (btn: IOperate) => {\r\n      if (!btn.click) {\r\n        return;\r\n      }\r\n      const result = btn.click(props.record);\r\n    };\r\n\r\n    return { operates$, operateClick };\r\n  },\r\n});\r\n</script>\r\n","import { App } from \"vue\";\r\nimport Operates from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nOperates.install = (app: App): void => {\r\n  app.component(Operates.name, Operates);\r\n};\r\n\r\nconst _Operates: SFCWithInstall<typeof Operates> = Operates as any;\r\nexport default _Operates;\r\n","\r\nimport { useModel } from \"@blazes/utils\";\r\nimport { defineComponent } from \"vue\";\r\nimport SearchOutlined from \"@ant-design/icons-vue/SearchOutlined\";\r\nimport CloseOutlined from \"@ant-design/icons-vue/CloseOutlined\";\r\n\r\nexport default defineComponent({\r\n  name: \"search-input\",\r\n  components: {\r\n    SearchOutlined,\r\n    CloseOutlined,\r\n  },\r\n  props: {\r\n    modelValue: String,\r\n    placeholder: {\r\n      type: String,\r\n      default: \"请输入内容\",\r\n    },\r\n  },\r\n  setup(props, context) {\r\n    const model = useModel<string>(props, context);\r\n\r\n    const search = () => {\r\n      context.emit(\"update:modelValue\", model.value);\r\n    };\r\n    const clear = () => {\r\n      model.value = \"\";\r\n      search();\r\n    };\r\n\r\n    return { model, search, clear };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=40236cca\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <a-input :placeholder=\"placeholder\" v-model:value=\"model\" @keyup.enter=\"search\">\r\n    <template #suffix>\r\n      <CloseOutlined v-if=\"model\" @click=\"clear\" />\r\n      <SearchOutlined v-else @click=\"search\" />\r\n    </template>\r\n  </a-input>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { useModel } from \"@blazes/utils\";\r\nimport { defineComponent } from \"vue\";\r\nimport SearchOutlined from \"@ant-design/icons-vue/SearchOutlined\";\r\nimport CloseOutlined from \"@ant-design/icons-vue/CloseOutlined\";\r\n\r\nexport default defineComponent({\r\n  name: \"search-input\",\r\n  components: {\r\n    SearchOutlined,\r\n    CloseOutlined,\r\n  },\r\n  props: {\r\n    modelValue: String,\r\n    placeholder: {\r\n      type: String,\r\n      default: \"请输入内容\",\r\n    },\r\n  },\r\n  setup(props, context) {\r\n    const model = useModel<string>(props, context);\r\n\r\n    const search = () => {\r\n      context.emit(\"update:modelValue\", model.value);\r\n    };\r\n    const clear = () => {\r\n      model.value = \"\";\r\n      search();\r\n    };\r\n\r\n    return { model, search, clear };\r\n  },\r\n});\r\n</script>\r\n","import { App } from \"vue\";\r\nimport SearchInput from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nSearchInput.install = (app: App): void => {\r\n  app.component(SearchInput.name, SearchInput);\r\n};\r\n\r\nconst _SearchInput: SFCWithInstall<typeof SearchInput> = SearchInput as any;\r\nexport default _SearchInput;\r\n","<template>\r\n  <a-row :gutter=\"sv.gutter\">\r\n    <a-col\r\n      v-for=\"option in sv.options\"\r\n      :key=\"option.label\"\r\n      class=\"item\"\r\n      :class=\"option.classes\"\r\n    >\r\n      <div class=\"label\">{{ option.label }}</div>\r\n      <div class=\"detail\">\r\n        <slot\r\n          :name=\"option.renderValue\"\r\n          v-if=\"option.renderValue\"\r\n          :value=\"option.value\"\r\n        ></slot>\r\n        <template v-else>\r\n          {{ option.value }}\r\n        </template>\r\n      </div>\r\n    </a-col>\r\n  </a-row>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref, watch } from \"vue\";\r\nimport { Sv } from \"./type\";\r\nimport { responseService } from \"@blazes/theme\";\r\n\r\nexport default defineComponent({\r\n  name: \"sv\",\r\n  props: {\r\n    isv: Object,\r\n    data: Object,\r\n  },\r\n  setup(props) {\r\n    const sv = ref({});\r\n    watch(\r\n      props,\r\n      ({ isv, data }) => {\r\n        const newSv = new Sv(isv as any, data);\r\n        newSv.options = newSv.options.map((option) => {\r\n          option.classes = responseService.genClass(option.col);\r\n          return option;\r\n        });\r\n        sv.value = newSv;\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    return { sv };\r\n  },\r\n});\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  display: flex !important;\r\n  .label {\r\n    padding-bottom: 16px;\r\n    line-height: 22px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    color: rgba(0, 0, 0, 0.5);\r\n    &::after {\r\n      content: \"：\";\r\n    }\r\n  }\r\n  .detail {\r\n    padding-bottom: 16px;\r\n    line-height: 22px;\r\n    color: rgba(0, 0, 0, 0.85);\r\n  }\r\n  .label,\r\n  .detail {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>\r\n","import { deepGet } from \"@blazes/utils\";\r\n\r\nexport interface ISvOption<T> {\r\n  label: string | ((data: T) => any);\r\n  value?: string | ((data: T) => any);\r\n  col?: number;\r\n  renderValue?: string;\r\n}\r\n\r\nexport class SvOption<T> {\r\n  label: string;\r\n  value: any;\r\n  col = 0;\r\n  [key: string]: any;\r\n  renderValue?: string;\r\n\r\n  constructor(option: ISvOption<T>, data: T, defaultVal = \"\") {\r\n    const { label, value, renderValue } = option;\r\n    this.label = typeof label === \"string\" ? label : label(data);\r\n    this.renderValue = renderValue;\r\n    const result =\r\n      typeof value === \"string\"\r\n        ? deepGet(data, value)\r\n        : value\r\n        ? value(data)\r\n        : null;\r\n    this.value = result == null ? defaultVal : result;\r\n  }\r\n}\r\n\r\nexport interface ISv<T> {\r\n  defaultVal?: any;\r\n  options: ISvOption<T>[];\r\n  labelWidth?: number;\r\n  gutter?: number;\r\n  col?: number;\r\n}\r\n\r\nexport class Sv<T> {\r\n  defaultVal: any;\r\n  options: SvOption<T>[];\r\n  labelWidth: string;\r\n  gutter: number;\r\n  col: number;\r\n\r\n  constructor(sv: ISv<T>, data: T) {\r\n    const { defaultVal, options, gutter, labelWidth, col } = sv;\r\n    this.defaultVal = defaultVal || \"-\";\r\n    this.gutter = gutter || 32;\r\n    this.labelWidth = labelWidth ? labelWidth + \"px\" : \"\";\r\n    this.col = col || 3;\r\n    this.options = options.map((ioption) => {\r\n      const option = new SvOption(ioption, data, this.defaultVal);\r\n      option.col = ioption.col || this.col;\r\n      return option;\r\n    });\r\n  }\r\n}\r\n","\r\nimport { defineComponent, ref, watch } from \"vue\";\r\nimport { Sv } from \"./type\";\r\nimport { responseService } from \"@blazes/theme\";\r\n\r\nexport default defineComponent({\r\n  name: \"sv\",\r\n  props: {\r\n    isv: Object,\r\n    data: Object,\r\n  },\r\n  setup(props) {\r\n    const sv = ref({});\r\n    watch(\r\n      props,\r\n      ({ isv, data }) => {\r\n        const newSv = new Sv(isv as any, data);\r\n        newSv.options = newSv.options.map((option) => {\r\n          option.classes = responseService.genClass(option.col);\r\n          return option;\r\n        });\r\n        sv.value = newSv;\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    return { sv };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=601ef8f4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=601ef8f4&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-601ef8f4\"\n\nexport default script","import { App } from \"vue\";\r\nimport Sv from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nSv.install = (app: App): void => {\r\n  app.component(Sv.name, Sv);\r\n};\r\n\r\nconst _Sv: SFCWithInstall<typeof Sv> = Sv as any;\r\nexport default _Sv;\r\n","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"form\"\r\n      ref=\"formRef\"\r\n      :layout=\"schema?.ui?.layout || 'horizontal'\"\r\n    >\r\n      <a-row>\r\n        <a-col\r\n          v-for=\"item in items\"\r\n          :key=\"item.ui.prop\"\r\n          :span=\"item.ui.gutter.span\"\r\n        >\r\n          <a-form-item\r\n            v-if=\"item.show\"\r\n            :label=\"$slots[item.ui.prop] ? undefined : item.title\"\r\n            :name=\"item.ui.prop\"\r\n            :rules=\"item.ui.rules\"\r\n            :class=\"item.ui.class\"\r\n            :style=\"{ width: item.ui.gutter.controlWidth }\"\r\n            :wrapperCol=\"{\r\n              span: item.ui.gutter.spanControl,\r\n              offset: item.ui.gutter.controlffset,\r\n            }\"\r\n            :labelCol=\"{\r\n              span: item.ui.gutter.spanLabel,\r\n              offset: item.ui.gutter.spanOffset,\r\n            }\"\r\n          >\r\n            <template v-if=\"$slots[item.ui.prop]\" #label>\r\n              <slot :name=\"item.ui.prop\" :schema=\"item\"></slot>\r\n            </template>\r\n            <component\r\n              :ui=\"item.ui\"\r\n              :schema=\"item\"\r\n              v-model=\"form[item.ui.prop]\"\r\n              :is=\"item.ui.widget\"\r\n              :ref=\"addItem(item.ui.prop)\"\r\n            ></component>\r\n          </a-form-item>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form>\r\n    <div v-if=\"button$\" :class=\"button$.className\">\r\n      <a-row type=\"flex\" :justify=\"button$.span ? 'start' : 'end'\">\r\n        <a-col class=\"text-right\" :span=\"button$.span\">\r\n          <a-button v-if=\"!button$.hideReset\" @click=\"reset\" class=\"mr-md\">{{\r\n            button$.resetText || \"取消\"\r\n          }}</a-button>\r\n          <a-button\r\n            type=\"primary\"\r\n            @click=\"submit\"\r\n            v-if=\"!button$.hideSubmit\"\r\n            v-btn-loading\r\n            >{{ button$.submitText || \"确定\" }}</a-button\r\n          >\r\n        </a-col>\r\n      </a-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport {\r\n  ISFSchema,\r\n  formSymbol,\r\n  formRefSymbol,\r\n  DEFAULT_GUTTER,\r\n  ISFSchemaType,\r\n} from \"./type\";\r\nimport Form from \"ant-design-vue/lib/form\";\r\nimport Row from \"ant-design-vue/lib/row\";\r\nimport Col from \"ant-design-vue/lib/col\";\r\nimport Button from \"ant-design-vue/lib/button\";\r\nimport {\r\n  computed,\r\n  defineComponent,\r\n  markRaw,\r\n  provide,\r\n  reactive,\r\n  ref,\r\n  Ref,\r\n  toRef,\r\n  watch,\r\n} from \"vue\";\r\nimport SfInput from \"./widgets/sf-input.vue\";\r\nimport { CUSTOM_TRIGGER } from \"@blazes/theme\";\r\nimport StringModel from \"./model/string\";\r\nimport AnyModel from \"./model/any\";\r\nimport NumberModel from \"./model/number\";\r\nimport BoolModel from \"./model/boolean\";\r\nimport { BtnLoading } from \"@blazes/theme\";\r\n\r\nconst typeModels = {\r\n  string: StringModel,\r\n  regexp: StringModel,\r\n  any: AnyModel,\r\n  number: NumberModel,\r\n  boolean: BoolModel,\r\n};\r\n\r\nexport default defineComponent({\r\n  name: \"sf\",\r\n  props: {\r\n    schema: Object,\r\n    width: String,\r\n    button: Object,\r\n    formData: Object,\r\n  },\r\n  emits: {\r\n    formSubmit: null,\r\n    formReset: null,\r\n  },\r\n  components: {\r\n    [Form.name]: Form,\r\n    [Form.Item.name]: Form.Item,\r\n    [Row.name]: Row,\r\n    [Col.name]: Col,\r\n    [Button.name]: Button,\r\n  },\r\n  directives: {\r\n    btnLoading: new BtnLoading(),\r\n  },\r\n  setup(props, context) {\r\n    const formRef: Ref<typeof Form | null> = ref(null);\r\n    const items: any[] = reactive([]);\r\n    const form: { [key: string]: any } = reactive({\r\n      ...(props.formData || {}),\r\n    });\r\n    provide(formSymbol, form);\r\n    provide(formRefSymbol, formRef);\r\n    const addReuiqredRule = (item: ISFSchema, type: ISFSchemaType) => {\r\n      return {\r\n        required: true,\r\n        fullField: item.title,\r\n        trigger: CUSTOM_TRIGGER,\r\n        type,\r\n        transform: (value: any) => new typeModels[type]().getValue(value),\r\n      };\r\n    };\r\n    let itemProperties: { [key: string]: any } = {};\r\n\r\n    // TODO el不知道怎么从模板中传入\r\n    const addItem = (prop: string) => (el: any) => {\r\n      itemProperties[prop] = el;\r\n    };\r\n\r\n    const searchProperty = (property: string) => {\r\n      return itemProperties[property];\r\n    };\r\n\r\n    watch(\r\n      () => props.schema as ISFSchema,\r\n      (schema) => {\r\n        itemProperties = {};\r\n        const parentGutter = {\r\n          ...DEFAULT_GUTTER,\r\n          ...(schema?.ui?.gutter || {}),\r\n        };\r\n        const properties = schema.properties as { [key: string]: ISFSchema };\r\n        Object.keys(properties).forEach((key: string) => {\r\n          const item: ISFSchema = { ...properties[key] };\r\n          item.ui = { ...(item.ui || {}) };\r\n          item.ui.widget = markRaw(item.ui.widget || SfInput);\r\n          item.ui.placeholder = item.ui.placeholder || `请填写${item.title}`;\r\n          item.ui.prop = key;\r\n          item.ui.rules =\r\n            item.ui.rules == null\r\n              ? []\r\n              : Array.isArray(item.ui.rules)\r\n              ? item.ui.rules\r\n              : [item.ui.rules];\r\n          const type = (item.type = item.type || \"string\");\r\n          if (item.required) {\r\n            const requiredRule = item.ui.rules.find(\r\n              (r: any) => r.required === true\r\n            );\r\n            if (!requiredRule) {\r\n              item.ui.rules.push(addReuiqredRule(item, type));\r\n            }\r\n          }\r\n          if (item.ui.validate) {\r\n            item.ui.rules.push({\r\n              ...item.ui.validate,\r\n              validator: item.ui.validate.validator(form),\r\n            });\r\n          }\r\n          if (!item.ui.hidden) {\r\n            items.push(item);\r\n          }\r\n          item.ui.gutter = { ...parentGutter, ...(item.ui.gutter || {}) };\r\n        });\r\n        items.forEach((item) => {\r\n          if (item.ui.visibleIf) {\r\n            const watchKeys = Object.keys(item.ui.visibleIf).map((key) => {\r\n              if (!form.hasOwnProperty(key)) {\r\n                form[key] = null;\r\n              }\r\n              return toRef(form, key);\r\n            });\r\n            watch(\r\n              watchKeys,\r\n              (values) => {\r\n                let flag = true;\r\n                values.forEach((value, index) => {\r\n                  const visibleIfFns = Object.values(item.ui.visibleIf) as (\r\n                    | any[]\r\n                    | ((value: any) => boolean)\r\n                  )[];\r\n                  const fn = Array.isArray(visibleIfFns[index])\r\n                    ? () => (visibleIfFns[index] as any[]).includes(value)\r\n                    : (visibleIfFns[index] as (value: any) => boolean);\r\n                  flag = flag && fn(value);\r\n                });\r\n                item.show = flag;\r\n              },\r\n              { immediate: true }\r\n            );\r\n          } else {\r\n            item.show = true;\r\n          }\r\n        });\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    watch(\r\n      () => props.formData as any,\r\n      (data) => {\r\n        data = data || {};\r\n        const keySet = new Set(Object.keys(form));\r\n        Object.keys(data).forEach((key) => {\r\n          keySet.add(key);\r\n        });\r\n        Array.from(keySet).forEach((key) => {\r\n          form[key] = data[key] !== undefined ? data[key] : form[key];\r\n        });\r\n      }\r\n    );\r\n\r\n    const button$ = computed(() => {\r\n      if (props.button === null) {\r\n        return null;\r\n      }\r\n      return props.button || {};\r\n    });\r\n\r\n    const submit = () => {\r\n      (formRef.value as any).validate().then(() => {\r\n        context.emit(\"formSubmit\", form);\r\n      });\r\n    };\r\n    const reset = () => {\r\n      context.emit(\"formReset\", form);\r\n    };\r\n\r\n    return {\r\n      items,\r\n      formRef,\r\n      form,\r\n      submit,\r\n      reset,\r\n      button$,\r\n      searchProperty,\r\n      addItem,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.icon {\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  right: -24px;\r\n  color: #57b425;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n","import { CUSTOM_TRIGGER } from \"@blazes/theme\";\r\n\r\nexport interface ISFSchemaEnum {\r\n  label?: string;\r\n  value?: any;\r\n  disabled?: boolean;\r\n  checked?: boolean;\r\n}\r\n\r\nexport type ISFSchemaEnumType = ISFSchemaEnum | number | string | boolean;\r\n\r\nexport interface ISFUISchemaItem {\r\n  class?: string;\r\n  placeholder?: string;\r\n  optional?: string;\r\n  optionalHelp?: string;\r\n  widget?: any;\r\n  rules?: any;\r\n  prop?: string;\r\n  validate?: {\r\n    validator: (form: any) => void;\r\n    trigger: \"blur\" | \"change\" | typeof CUSTOM_TRIGGER;\r\n  };\r\n  asyncData?: () => Promise<ISFSchemaEnumType[]>;\r\n  gutter?: {\r\n    spanOffset?: number;\r\n    controlffset?: number;\r\n    controlWidth?: string;\r\n    spanLabel?: number;\r\n    spanControl?: number;\r\n    span?: number;\r\n  };\r\n  hidden?: boolean;\r\n  layout?: \"horizontal\" | \"vertical\";\r\n  visibleIf?: { [key: string]: any[] | ((value: any) => boolean) };\r\n  [key: string]: any;\r\n}\r\n\r\nexport type ISFSchemaType = \"string\" | \"number\" | \"boolean\" | \"regexp\" | \"any\";\r\n\r\n// 默认object先\r\nexport interface ISFSchema {\r\n  title?: string;\r\n  required?: boolean;\r\n  description?: string;\r\n  type?: ISFSchemaType;\r\n  enums?: ISFSchemaEnumType[];\r\n  ui?: ISFUISchemaItem;\r\n  readOnly?: boolean;\r\n  properties?: { [key: string]: ISFSchema };\r\n}\r\n\r\nexport interface ISFSchemaButton {\r\n  className?: string; // 默认text-right\r\n  submitText?: string;\r\n  resetText?: string;\r\n  span?: number;\r\n  hideSubmit?: boolean;\r\n  hideReset?: boolean;\r\n}\r\n\r\nexport const formSymbol = Symbol(\"form\");\r\nexport const formRefSymbol = Symbol(\"formRef\");\r\n\r\nexport const DEFAULT_GUTTER = {\r\n  offset: 0,\r\n  controlWidth: \"auto\",\r\n  spanLabel: 5,\r\n  spanControl: 17,\r\n  span: 24,\r\n};\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { useModel } from \"@blazes/utils\";\r\nimport Input from \"ant-design-vue/lib/input\";\r\n\r\nexport default defineComponent({\r\n  name: \"sf-input\",\r\n  props: {\r\n    modelValue: [String, Number, Boolean],\r\n    ui: Object,\r\n    schema: Object\r\n  },\r\n  components: {\r\n    [Input.name]: Input,\r\n    [Input.Password.name]: Input.Password\r\n  },\r\n  setup(props, context) {\r\n    const model$ = useModel<any>(props, context);\r\n\r\n    return { model$ };\r\n  }\r\n});\r\n","import { render } from \"./sf-input.vue?vue&type=template&id=5fffd844\"\nimport script from \"./sf-input.vue?vue&type=script&lang=ts\"\nexport * from \"./sf-input.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <a-input-password\r\n    v-if=\"ui.showPassword\"\r\n    v-model:value=\"model$\"\r\n    :placeholder=\"ui.placeholder\"\r\n    :disabled=\"schema.readOnly\"\r\n  />\r\n  <a-input\r\n    v-else\r\n    :placeholder=\"ui.placeholder\"\r\n    v-model:value=\"model$\"\r\n    :disabled=\"schema.readOnly\"\r\n  ></a-input>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { useModel } from \"@blazes/utils\";\r\nimport Input from \"ant-design-vue/lib/input\";\r\n\r\nexport default defineComponent({\r\n  name: \"sf-input\",\r\n  props: {\r\n    modelValue: [String, Number, Boolean],\r\n    ui: Object,\r\n    schema: Object\r\n  },\r\n  components: {\r\n    [Input.name]: Input,\r\n    [Input.Password.name]: Input.Password\r\n  },\r\n  setup(props, context) {\r\n    const model$ = useModel<any>(props, context);\r\n\r\n    return { model$ };\r\n  }\r\n});\r\n</script>\r\n","export default abstract class BaseModel<T> {\r\n  getValue(value: any) {\r\n    if (value == null) {\r\n      return null;\r\n    }\r\n    return this.fallbackValue(value);\r\n  }\r\n  abstract fallbackValue(value: any): T;\r\n}\r\n","import BaseModel from \"./base\";\r\n\r\nexport default class StringModel extends BaseModel<string> {\r\n  fallbackValue(value: any): string {\r\n    return `${value}`;\r\n  }\r\n}\r\n","\r\nimport {\r\n  ISFSchema,\r\n  formSymbol,\r\n  formRefSymbol,\r\n  DEFAULT_GUTTER,\r\n  ISFSchemaType,\r\n} from \"./type\";\r\nimport Form from \"ant-design-vue/lib/form\";\r\nimport Row from \"ant-design-vue/lib/row\";\r\nimport Col from \"ant-design-vue/lib/col\";\r\nimport Button from \"ant-design-vue/lib/button\";\r\nimport {\r\n  computed,\r\n  defineComponent,\r\n  markRaw,\r\n  provide,\r\n  reactive,\r\n  ref,\r\n  Ref,\r\n  toRef,\r\n  watch,\r\n} from \"vue\";\r\nimport SfInput from \"./widgets/sf-input.vue\";\r\nimport { CUSTOM_TRIGGER } from \"@blazes/theme\";\r\nimport StringModel from \"./model/string\";\r\nimport AnyModel from \"./model/any\";\r\nimport NumberModel from \"./model/number\";\r\nimport BoolModel from \"./model/boolean\";\r\nimport { BtnLoading } from \"@blazes/theme\";\r\n\r\nconst typeModels = {\r\n  string: StringModel,\r\n  regexp: StringModel,\r\n  any: AnyModel,\r\n  number: NumberModel,\r\n  boolean: BoolModel,\r\n};\r\n\r\nexport default defineComponent({\r\n  name: \"sf\",\r\n  props: {\r\n    schema: Object,\r\n    width: String,\r\n    button: Object,\r\n    formData: Object,\r\n  },\r\n  emits: {\r\n    formSubmit: null,\r\n    formReset: null,\r\n  },\r\n  components: {\r\n    [Form.name]: Form,\r\n    [Form.Item.name]: Form.Item,\r\n    [Row.name]: Row,\r\n    [Col.name]: Col,\r\n    [Button.name]: Button,\r\n  },\r\n  directives: {\r\n    btnLoading: new BtnLoading(),\r\n  },\r\n  setup(props, context) {\r\n    const formRef: Ref<typeof Form | null> = ref(null);\r\n    const items: any[] = reactive([]);\r\n    const form: { [key: string]: any } = reactive({\r\n      ...(props.formData || {}),\r\n    });\r\n    provide(formSymbol, form);\r\n    provide(formRefSymbol, formRef);\r\n    const addReuiqredRule = (item: ISFSchema, type: ISFSchemaType) => {\r\n      return {\r\n        required: true,\r\n        fullField: item.title,\r\n        trigger: CUSTOM_TRIGGER,\r\n        type,\r\n        transform: (value: any) => new typeModels[type]().getValue(value),\r\n      };\r\n    };\r\n    let itemProperties: { [key: string]: any } = {};\r\n\r\n    // TODO el不知道怎么从模板中传入\r\n    const addItem = (prop: string) => (el: any) => {\r\n      itemProperties[prop] = el;\r\n    };\r\n\r\n    const searchProperty = (property: string) => {\r\n      return itemProperties[property];\r\n    };\r\n\r\n    watch(\r\n      () => props.schema as ISFSchema,\r\n      (schema) => {\r\n        itemProperties = {};\r\n        const parentGutter = {\r\n          ...DEFAULT_GUTTER,\r\n          ...(schema?.ui?.gutter || {}),\r\n        };\r\n        const properties = schema.properties as { [key: string]: ISFSchema };\r\n        Object.keys(properties).forEach((key: string) => {\r\n          const item: ISFSchema = { ...properties[key] };\r\n          item.ui = { ...(item.ui || {}) };\r\n          item.ui.widget = markRaw(item.ui.widget || SfInput);\r\n          item.ui.placeholder = item.ui.placeholder || `请填写${item.title}`;\r\n          item.ui.prop = key;\r\n          item.ui.rules =\r\n            item.ui.rules == null\r\n              ? []\r\n              : Array.isArray(item.ui.rules)\r\n              ? item.ui.rules\r\n              : [item.ui.rules];\r\n          const type = (item.type = item.type || \"string\");\r\n          if (item.required) {\r\n            const requiredRule = item.ui.rules.find(\r\n              (r: any) => r.required === true\r\n            );\r\n            if (!requiredRule) {\r\n              item.ui.rules.push(addReuiqredRule(item, type));\r\n            }\r\n          }\r\n          if (item.ui.validate) {\r\n            item.ui.rules.push({\r\n              ...item.ui.validate,\r\n              validator: item.ui.validate.validator(form),\r\n            });\r\n          }\r\n          if (!item.ui.hidden) {\r\n            items.push(item);\r\n          }\r\n          item.ui.gutter = { ...parentGutter, ...(item.ui.gutter || {}) };\r\n        });\r\n        items.forEach((item) => {\r\n          if (item.ui.visibleIf) {\r\n            const watchKeys = Object.keys(item.ui.visibleIf).map((key) => {\r\n              if (!form.hasOwnProperty(key)) {\r\n                form[key] = null;\r\n              }\r\n              return toRef(form, key);\r\n            });\r\n            watch(\r\n              watchKeys,\r\n              (values) => {\r\n                let flag = true;\r\n                values.forEach((value, index) => {\r\n                  const visibleIfFns = Object.values(item.ui.visibleIf) as (\r\n                    | any[]\r\n                    | ((value: any) => boolean)\r\n                  )[];\r\n                  const fn = Array.isArray(visibleIfFns[index])\r\n                    ? () => (visibleIfFns[index] as any[]).includes(value)\r\n                    : (visibleIfFns[index] as (value: any) => boolean);\r\n                  flag = flag && fn(value);\r\n                });\r\n                item.show = flag;\r\n              },\r\n              { immediate: true }\r\n            );\r\n          } else {\r\n            item.show = true;\r\n          }\r\n        });\r\n      },\r\n      { immediate: true }\r\n    );\r\n\r\n    watch(\r\n      () => props.formData as any,\r\n      (data) => {\r\n        data = data || {};\r\n        const keySet = new Set(Object.keys(form));\r\n        Object.keys(data).forEach((key) => {\r\n          keySet.add(key);\r\n        });\r\n        Array.from(keySet).forEach((key) => {\r\n          form[key] = data[key] !== undefined ? data[key] : form[key];\r\n        });\r\n      }\r\n    );\r\n\r\n    const button$ = computed(() => {\r\n      if (props.button === null) {\r\n        return null;\r\n      }\r\n      return props.button || {};\r\n    });\r\n\r\n    const submit = () => {\r\n      (formRef.value as any).validate().then(() => {\r\n        context.emit(\"formSubmit\", form);\r\n      });\r\n    };\r\n    const reset = () => {\r\n      context.emit(\"formReset\", form);\r\n    };\r\n\r\n    return {\r\n      items,\r\n      formRef,\r\n      form,\r\n      submit,\r\n      reset,\r\n      button$,\r\n      searchProperty,\r\n      addItem,\r\n    };\r\n  },\r\n});\r\n","import BaseModel from \"./base\";\r\n\r\nexport default class AnyModel extends BaseModel<any> {\r\n  fallbackValue(value: any): any {\r\n    return value;\r\n  }\r\n}\r\n","import BaseModel from \"./base\";\r\n\r\nexport default class NumberModel extends BaseModel<number | null> {\r\n  fallbackValue(value: any): number | null {\r\n    if (typeof value === \"string\") {\r\n      return value.length > 0 ? +value : null;\r\n    }\r\n    return +value;\r\n  }\r\n}\r\n","import BaseModel from \"./base\";\r\n\r\nexport default class NumberModel extends BaseModel<boolean> {\r\n  fallbackValue(value: any): boolean {\r\n    return !!value;\r\n  }\r\n}\r\n","import { render } from \"./index.vue?vue&type=template&id=a5e051da&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=a5e051da&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a5e051da\"\n\nexport default script","import { deepCopy } from \"@blazes/utils\";\r\nimport { ISFSchema, ISFSchemaEnum, ISFUISchemaItem } from \"./type\";\r\n\r\nexport function isBlank(o: any): boolean {\r\n  return o == null;\r\n}\r\n\r\nexport function getEnum(\r\n  list: any[],\r\n  formData: any,\r\n  readOnly: boolean\r\n): ISFSchemaEnum[] {\r\n  if (isBlank(list) || !Array.isArray(list) || list.length === 0) return [];\r\n  if (typeof list[0] !== \"object\") {\r\n    list = list.map((item: any) => {\r\n      return { label: item, value: item } as ISFSchemaEnum;\r\n    });\r\n  }\r\n  if (formData) {\r\n    if (!Array.isArray(formData)) formData = [formData];\r\n    list.forEach((item: ISFSchemaEnum) => {\r\n      if (~formData.indexOf(item.value)) item.checked = true;\r\n    });\r\n  }\r\n  // fix disabled status\r\n  if (readOnly) {\r\n    list.forEach((item: ISFSchemaEnum) => (item.disabled = true));\r\n  }\r\n  return list;\r\n}\r\n\r\nexport function getCopyEnum(\r\n  list: any[],\r\n  formData: any,\r\n  readOnly: boolean\r\n): ISFSchemaEnum[] {\r\n  return getEnum(deepCopy(list || []), formData, readOnly);\r\n}\r\n\r\nexport function getData(schema: ISFSchema, ui: ISFUISchemaItem, formData: any) {\r\n  if (ui.asyncData) {\r\n    return ui\r\n      .asyncData()\r\n      .then((list) => getEnum(list, formData, schema.readOnly as boolean));\r\n  }\r\n\r\n  return Promise.resolve(\r\n    getCopyEnum(\r\n      schema.enums as ISFSchemaEnum[],\r\n      formData,\r\n      schema.readOnly as boolean\r\n    )\r\n  );\r\n}\r\n\r\nexport function transMapToEnum(map: { [key: string]: any }): ISFSchemaEnum[] {\r\n  return Object.keys(map).map((key) => ({\r\n    label: map[key],\r\n    value: key,\r\n  }));\r\n}\r\n","import { App } from \"vue\";\r\nimport sf from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nsf.install = (app: App): void => {\r\n  app.component(sf.name, sf);\r\n};\r\n\r\nconst _sf: SFCWithInstall<typeof sf> = sf as any;\r\nexport default _sf;\r\nexport * from \"./src/util\";\r\nexport { formRefSymbol, formSymbol } from \"./src/type\";\r\n","<template>\r\n  <div class=\"table-wrapper\">\r\n    <div class=\"d-flex\">\r\n      <div>\r\n        <slot name=\"left\"></slot>\r\n      </div>\r\n      <div class=\"right\">\r\n        <slot name=\"right\"></slot>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <slot name=\"default\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"table-wrapper\"\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.table-wrapper {\r\n  .right {\r\n    margin-left: auto;\r\n  }\r\n}\r\n</style>","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n  name: \"table-wrapper\"\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=0c1fa5aa&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0c1fa5aa&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0c1fa5aa\"\n\nexport default script","import { App } from \"vue\";\r\nimport TableWrapper from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nTableWrapper.install = (app: App): void => {\r\n  app.component(TableWrapper.name, TableWrapper);\r\n};\r\n\r\nconst _TableWrapper: SFCWithInstall<typeof TableWrapper> = TableWrapper as any;\r\nexport default _TableWrapper;\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { TagColor } from \"@blazes/utils\";\r\n\r\nexport default defineComponent({\r\n  name: \"tags\",\r\n  props: {\r\n    tagMap: Object,\r\n    value: [Number, String],\r\n  },\r\n  setup() {\r\n    return { TagColor };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=21eb803f\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <a-tag :color=\"tagMap[value]?.color\">{{ tagMap[value]?.text }}</a-tag>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { TagColor } from \"@blazes/utils\";\r\n\r\nexport default defineComponent({\r\n  name: \"tags\",\r\n  props: {\r\n    tagMap: Object,\r\n    value: [Number, String],\r\n  },\r\n  setup() {\r\n    return { TagColor };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import { App } from \"vue\";\r\nimport Tags from \"./src/index.vue\";\r\n\r\ntype SFCWithInstall<T> = T & { install(app: App): void };\r\n\r\nTags.install = (app: App): void => {\r\n  app.component(Tags.name, Tags);\r\n};\r\n\r\nconst _Tags: SFCWithInstall<typeof Tags> = Tags as any;\r\nexport default _Tags;\r\n"],"sourceRoot":""}
{"version":3,"file":"index.js","sources":["../src/constant/index.ts","../src/other/index.ts","../src/dom/index.ts","../src/array/index.ts","../src/hook/index.ts"],"sourcesContent":["export enum TagColor {\r\n  Green = \"#87d068\",\r\n  Red = \"#f50\",\r\n  Yellow = \"#faad14\",\r\n  Blue = \"#2db7f5\",\r\n  Default = \"\",\r\n}\r\n\r\nexport const DIGITAL_REGEX = /^\\d+$/;\r\n","import extend from \"extend\";\r\n\r\nexport function deepGet(\r\n  obj: any | null,\r\n  path: string | string[] | null | undefined,\r\n  defaultValue?: any\r\n): any {\r\n  if (!obj || path == null || path.length === 0) return defaultValue;\r\n  if (!Array.isArray(path)) {\r\n    path = ~path.indexOf(\".\") ? path.split(\".\") : [path];\r\n  }\r\n  if (path.length === 1) {\r\n    const checkObj = obj[path[0]];\r\n    return typeof checkObj === \"undefined\" ? defaultValue : checkObj;\r\n  }\r\n  const res = path.reduce((o, k) => (o || {})[k], obj);\r\n  return typeof res === \"undefined\" ? defaultValue : res;\r\n}\r\n\r\nexport function deepCopy(obj: any): any {\r\n  const result = extend(true, {}, { _: obj });\r\n  return result._;\r\n}\r\n\r\nexport function deepMergeKey(\r\n  original: any,\r\n  ingoreArray: boolean,\r\n  ...objects: any[]\r\n): any {\r\n  if (Array.isArray(original) || typeof original !== \"object\") return original;\r\n\r\n  const isObject = (v: any) => typeof v === \"object\" || typeof v === \"function\";\r\n\r\n  const merge = (target: any, obj: Record<string, unknown>) => {\r\n    Object.keys(obj)\r\n      .filter(\r\n        (key) =>\r\n          key !== \"__proto__\" && Object.prototype.hasOwnProperty.call(obj, key)\r\n      )\r\n      .forEach((key) => {\r\n        const oldValue = (obj as any)[key];\r\n        const newValue = target[key];\r\n        if (Array.isArray(newValue)) {\r\n          target[key] = ingoreArray ? oldValue : [...newValue, ...oldValue];\r\n        } else if (\r\n          oldValue != null &&\r\n          isObject(oldValue) &&\r\n          newValue != null &&\r\n          isObject(newValue)\r\n        ) {\r\n          target[key] = merge(newValue, oldValue);\r\n        } else {\r\n          target[key] = deepCopy(oldValue);\r\n        }\r\n      });\r\n    return target;\r\n  };\r\n\r\n  objects.filter((v) => isObject(v)).forEach((v) => merge(original, v));\r\n\r\n  return original;\r\n}\r\n\r\nexport function deepMerge(original: any, ...objects: any[]): any {\r\n  return deepMergeKey(original, false, ...objects);\r\n}\r\n\r\nexport function toNum(height: string): number {\r\n  return +height.replace(/^([\\d.]+)px$/, \"$1\");\r\n}\r\n\r\nexport function objIsEmpty(obj: any) {\r\n  return obj == null || Object.keys(obj).length === 0;\r\n}\r\n\r\n/**\r\n * 复制字符串文档至剪贴板\r\n */\r\nexport function copy(value: string): Promise<string> {\r\n  return new Promise<string>((resolve): void => {\r\n    let copyTextArea: HTMLTextAreaElement | null = null;\r\n    try {\r\n      copyTextArea = document.createElement(\"textarea\");\r\n      copyTextArea.style.height = \"0px\";\r\n      copyTextArea.style.opacity = \"0\";\r\n      copyTextArea.style.width = \"0px\";\r\n      document.body.appendChild(copyTextArea);\r\n      copyTextArea.value = value;\r\n      copyTextArea.select();\r\n      document.execCommand(\"copy\");\r\n      resolve(value);\r\n    } finally {\r\n      if (copyTextArea && copyTextArea.parentNode) {\r\n        copyTextArea.parentNode.removeChild(copyTextArea);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport function underlineToHump(str: string) {\r\n  return str.replace(/\\-(\\w)/g, function (_, letter) {\r\n    return letter.toUpperCase();\r\n  });\r\n}\r\n\r\nexport function upperCase(str: string) {\r\n  const reg = /\\b(\\w)|\\s(\\w)/g;\r\n  return str.replace(reg, (m) => m.toUpperCase());\r\n}\r\n","export function hasClass(el: HTMLElement, className: string): boolean {\r\n  if (!className) return false;\r\n\r\n  return el.className.includes(className);\r\n}\r\n\r\nexport function addClass(el: HTMLElement, className: string) {\r\n  if (!className) return;\r\n  if (hasClass(el, className)) return;\r\n\r\n  el.className += ` ${className} `;\r\n}\r\n\r\nexport function removeClass(el: HTMLElement, className: string) {\r\n  if (!className) return;\r\n  if (!hasClass(el, className)) return;\r\n\r\n  el.className = el.className.replace(className, \"\").trim();\r\n}\r\n\r\n// 插入到子元素头部\r\nexport function prepend(el: HTMLElement, newEl: HTMLElement) {\r\n  el.insertBefore(newEl, el.children[0]);\r\n}\r\n\r\nexport function insertAfter<T extends Element>(\r\n  newChild: T,\r\n  refChild: Element\r\n): T {\r\n  const parent = refChild.parentElement;\r\n  if (!parent) {\r\n    throw new Error(\"没有父节点\");\r\n  }\r\n  if (parent.lastChild === refChild) {\r\n    parent.appendChild(newChild);\r\n  } else {\r\n    parent.insertBefore(newChild, refChild.nextElementSibling);\r\n  }\r\n  return newChild;\r\n}\r\n","export class ArrayService {\r\n  static arrIsEmpty(arr: Array<any> | undefined): boolean {\r\n    return arr == null || (Array.isArray(arr) && arr.length === 0);\r\n  }\r\n\r\n  static getLast<T>(arr: T[]): T | undefined {\r\n    return arr[arr.length - 1];\r\n  }\r\n\r\n  static clear<T>(arr: T[]) {\r\n    arr.splice(0, arr.length);\r\n  }\r\n\r\n  static flattern<T = any[]>(arr: any[]): T[] {\r\n    return arr.reduce(\r\n      (result: T[], cur) =>\r\n        result.concat(Array.isArray(cur) ? this.flattern(cur) : cur),\r\n      []\r\n    );\r\n  }\r\n}\r\n","import { reactive, ref, SetupContext, watch } from \"vue\";\r\n\r\n// 没有监听props的变化\r\nexport function useModel<T>(\r\n  props: { modelValue?: T | undefined; [key: string]: any },\r\n  ctx: SetupContext<any>,\r\n  key = \"modelValue\"\r\n) {\r\n  const modelValue$ = ref(props[key]) as any;\r\n  watch(modelValue$, (value: T) => {\r\n    ctx.emit(`update:${key}`, value);\r\n  });\r\n  watch(\r\n    () => props[key],\r\n    (value) => {\r\n      modelValue$.value = value;\r\n    }\r\n  );\r\n\r\n  return modelValue$;\r\n}\r\n\r\nexport function useRefs<T>(): [T[], (index: number) => (value: T) => void] {\r\n  const refs: T[] = [];\r\n  const setRef = (index: number) => (value: T) => {\r\n    refs[index] = value;\r\n  };\r\n\r\n  return [refs, setRef];\r\n}\r\n\r\nexport function useChecked<T extends { checked?: boolean }>(\r\n  items: T[],\r\n  same = true\r\n) {\r\n  let innerItems = items;\r\n  const checked = reactive({\r\n    all: true,\r\n    indeterminate: false,\r\n  });\r\n\r\n  const updateChecked = () => {\r\n    checked.all = innerItems.every(isChecked);\r\n    checked.indeterminate = checked.all ? false : innerItems.some(isChecked);\r\n  };\r\n\r\n  const checkAll = () => {\r\n    innerItems.forEach(\r\n      (item: T) => (item.checked = same ? checked.all : !checked.all)\r\n    );\r\n    updateChecked();\r\n  };\r\n\r\n  const isChecked = (item: T) =>\r\n    (same && item.checked) || (!same && !item.checked);\r\n\r\n  const checkApart = (item: T) => {\r\n    item.checked = !item.checked;\r\n    updateChecked();\r\n  };\r\n\r\n  const resetItems = (newItems: T[]) => {\r\n    innerItems = newItems;\r\n    updateChecked();\r\n  };\r\n\r\n  updateChecked();\r\n\r\n  return { checkAll, checkApart, checked, resetItems, updateChecked };\r\n}\r\n"],"names":["TagColor","deepCopy","obj","extend","_","deepMergeKey","original","ingoreArray","objects","Array","isArray","isObject","v","merge","target","Object","keys","filter","key","prototype","hasOwnProperty","call","forEach","oldValue","newValue","hasClass","el","className","includes","arrIsEmpty","arr","length","getLast","clear","splice","flattern","reduce","result","cur","concat","this","value","Promise","resolve","copyTextArea","document","createElement","style","height","opacity","width","body","appendChild","select","execCommand","parentNode","removeChild","path","defaultValue","indexOf","split","checkObj","res","o","k","newChild","refChild","parent","parentElement","Error","lastChild","insertBefore","nextElementSibling","newEl","children","replace","trim","str","letter","toUpperCase","m","items","same","innerItems","checked","reactive","all","indeterminate","updateChecked","every","isChecked","some","item","checkAll","checkApart","resetItems","newItems","props","ctx","modelValue$","ref","watch","emit","refs","index"],"mappings":"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"}